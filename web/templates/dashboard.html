<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Maybee Dashboard</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link href="/static/style.css" rel="stylesheet">
</head>
<body class="dashboard-body">
    <!-- Modern Navbar -->
    <nav class="modern-navbar">
        <div class="navbar-container">
            <div class="navbar-brand-section">
                <a class="brand-link" href="/">
                    <div class="brand-icon">
                        <i class="fas fa-bug"></i>
                    </div>
                    <span class="brand-text">Maybee</span>
                    <span class="brand-subtitle">Dashboard</span>
                </a>
            </div>
            
            <div class="navbar-actions">
                <!-- Language Selector -->
                <div class="action-item language-selector">
                    <button class="action-btn" id="languageDropdown" data-bs-toggle="dropdown" aria-expanded="false">
                        <i class="fas fa-globe"></i>
                        <span id="currentLanguage">English</span>
                        <i class="fas fa-chevron-down ms-1"></i>
                    </button>
                    <ul class="dropdown-menu modern-dropdown" id="languageMenu">
                        <!-- Language options will be populated by JavaScript -->
                    </ul>
                </div>
                
                <!-- User Menu -->
                <div class="action-item user-menu">
                    <button class="action-btn user-btn" id="userDropdown" data-bs-toggle="dropdown" aria-expanded="false">
                        <img id="userAvatar" src="" alt="Avatar" class="user-avatar" style="display: none;">
                        <span id="username">Loading...</span>
                        <i class="fas fa-chevron-down ms-1"></i>
                    </button>
                    <ul class="dropdown-menu modern-dropdown">
                        <li><a class="dropdown-item" href="#" onclick="logout()" data-translate="navigation.logout">
                            <i class="fas fa-sign-out-alt me-2"></i>Logout
                        </a></li>
                    </ul>
                </div>
            </div>
        </div>
    </nav>

    <!-- Dashboard Layout -->
    <div class="dashboard-layout">
        <!-- Modern Sidebar -->
        <aside class="dashboard-sidebar">
            <nav class="sidebar-nav">
                <a class="nav-item active" href="#overview" data-translate="navigation.overview">
                    <div class="nav-icon">
                        <i class="fas fa-tachometer-alt"></i>
                    </div>
                    <span class="nav-text" data-translate="navigation.overview">Overview</span>
                </a>
                
                <a class="nav-item" href="#xp-settings" data-translate="navigation.xp_system">
                    <div class="nav-icon">
                        <i class="fas fa-trophy"></i>
                    </div>
                    <span class="nav-text" data-translate="navigation.xp_system">XP System</span>
                </a>
                
                <a class="nav-item" href="#moderation" data-translate="navigation.moderation">
                    <div class="nav-icon">
                        <i class="fas fa-shield-alt"></i>
                    </div>
                    <span class="nav-text" data-translate="navigation.moderation">Moderation</span>
                </a>
                
                <a class="nav-item" href="#welcome" data-translate="navigation.welcome_system">
                    <div class="nav-icon">
                        <i class="fas fa-door-open"></i>
                    </div>
                    <span class="nav-text" data-translate="navigation.welcome_system">Welcome System</span>
                </a>
                
                <a class="nav-item" href="#role-menus" data-translate="navigation.role_menus">
                    <div class="nav-icon">
                        <i class="fas fa-list"></i>
                    </div>
                    <span class="nav-text" data-translate="navigation.role_menus">Role Menus</span>
                </a>
                
                <a class="nav-item" href="#logs" data-translate="navigation.server_logs">
                    <div class="nav-icon">
                        <i class="fas fa-file-alt"></i>
                    </div>
                    <span class="nav-text" data-translate="navigation.server_logs">Server Logs</span>
                </a>
                
                <a class="nav-item" href="#tickets" data-translate="navigation.ticket_system">
                    <div class="nav-icon">
                        <i class="fas fa-ticket-alt"></i>
                    </div>
                    <span class="nav-text" data-translate="navigation.ticket_system">Ticket System</span>
                </a>
                
                <a class="nav-item" href="#ticket-logs">
                    <div class="nav-icon">
                        <i class="fas fa-history"></i>
                    </div>
                    <span class="nav-text">Ticket Logs</span>
                </a>
                
                <a class="nav-item" href="#embed" data-translate="navigation.embed_system">
                    <div class="nav-icon">
                        <i class="fas fa-code"></i>
                    </div>
                    <span class="nav-text" data-translate="navigation.embed_system">Embed Creator</span>
                </a>
            </nav>
        </aside>

        <!-- Main Content -->
        <main class="dashboard-main">
            <!-- Dashboard Header -->
            <div class="dashboard-header">
                <div class="header-left">
                    <h1 class="page-title" data-translate="navigation.dashboard">Dashboard</h1>
                    <p class="page-subtitle" data-translate="dashboard.subtitle">Manage your server settings</p>
                </div>
                
                <div class="header-right">
                    <div class="server-selector">
                        <label class="selector-label" data-translate="common.server">Server</label>
                        <select class="modern-select" id="guildSelector" onchange="selectGuild()">
                            <option value="" data-translate="navigation.select_server">Select a server...</option>
                        </select>
                    </div>
                </div>
            </div>

            <!-- Loading overlay -->
            <div id="loadingOverlay" class="loading-overlay">
                <div class="loading-content">
                    <div class="loading-spinner">
                        <div class="spinner"></div>
                    </div>
                    <p class="loading-text" data-translate="navigation.loading_dashboard">Loading dashboard...</p>
                </div>
            </div>

            <!-- Content Container -->
            <div id="dashboardContent" class="dashboard-content" style="display: none;">
                <!-- Overview Tab -->
                <div class="tab-pane fade show active" id="overview">
                    <!-- Stats Grid -->
                    <div class="stats-grid">
                        <div class="stat-card primary">
                            <div class="stat-icon">
                                <i class="fas fa-users"></i>
                            </div>
                            <div class="stat-content">
                                <div class="stat-value" id="totalMembers">0</div>
                                <div class="stat-label" data-translate="overview.total_members">Total Members</div>
                            </div>
                        </div>
                        
                        <div class="stat-card success">
                            <div class="stat-icon">
                                <i class="fas fa-star"></i>
                            </div>
                            <div class="stat-content">
                                <div class="stat-value" id="totalXP">0</div>
                                <div class="stat-label" data-translate="overview.total_xp">Total XP Given</div>
                            </div>
                        </div>
                        
                        <div class="stat-card warning">
                            <div class="stat-icon">
                                <i class="fas fa-trophy"></i>
                            </div>
                            <div class="stat-content">
                                <div class="stat-value" id="avgLevel">0</div>
                                <div class="stat-label" data-translate="overview.average_level">Average Level</div>
                            </div>
                        </div>
                        
                        <div class="stat-card info">
                            <div class="stat-icon">
                                <i class="fas fa-chart-line"></i>
                            </div>
                            <div class="stat-content">
                                <div class="stat-value" id="recentActivity">0</div>
                                <div class="stat-label" data-translate="overview.recent_activity">Recent Activity</div>
                            </div>
                        </div>
                    </div>

                    <!-- Top Users Card -->
                    <div class="content-card">
                        <div class="card-header">
                            <h3 class="card-title" data-translate="overview.top_members">Top Members</h3>
                            <div class="card-actions">
                                <button class="action-btn-small">
                                    <i class="fas fa-download"></i>
                                    Export
                                </button>
                            </div>
                        </div>
                        <div class="card-content">
                            <div class="table-container">
                                <table class="modern-table">
                                    <thead>
                                        <tr>
                                            <th data-translate="overview.rank">Rank</th>
                                            <th data-translate="common.user">Member</th>
                                            <th data-translate="overview.level">Level</th>
                                            <th data-translate="overview.total_xp_column">Experience</th>
                                        </tr>
                                    </thead>
                                    <tbody id="topUsersTable">
                                        <tr>
                                            <td colspan="4" class="no-data" data-translate="dashboard.select_server_data">Select a server to view data</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- XP Settings Tab -->
                <div class="tab-pane fade" id="xp-settings">
                    <div class="content-card">
                        <div class="card-header">
                            <h3 class="card-title" data-translate="xp_system.title">
                                <i class="fas fa-trophy me-2"></i>
                                XP System Configuration
                            </h3>
                            <div class="card-actions">
                                <button class="action-btn-small" type="button" id="resetXPBtn" style="background: #dc3545; border-color: #dc3545;">
                                    <i class="fas fa-trash-alt"></i>
                                    <span data-translate="xp_system.reset_xp">Reset All XP</span>
                                </button>
                            </div>
                        </div>
                        <div class="card-content">
                            <form id="xpSettingsForm">
                                <div class="settings-grid">
                                    <!-- General Settings -->
                                    <div class="settings-section">
                                        <h4 class="section-title" data-translate="xp_system.general_settings">General Settings</h4>
                                        
                                        <div class="form-group">
                                            <div class="toggle-switch">
                                                <input type="checkbox" id="xpEnabled" class="toggle-input" checked>
                                                <label for="xpEnabled" class="toggle-label">
                                                    <span class="toggle-text" data-translate="xp_system.enable_xp">Enable XP System</span>
                                                </label>
                                            </div>
                                        </div>

                                        <div class="form-group">
                                            <label class="form-label" data-translate="xp_system.xp_channel">XP Channel</label>
                                            <select id="xpChannel" class="form-select">
                                                <option value="" data-translate="xp_system.all_channels">All channels</option>
                                            </select>
                                            <div class="form-hint" data-translate="xp_system.xp_channel_description">Channel where XP can be earned (leave blank for all)</div>
                                        </div>
                                    </div>

                                    <!-- Level Up Settings -->
                                    <div class="settings-section">
                                        <h4 class="section-title" data-translate="xp_system.level_up_settings">Level Up Settings</h4>
                                        
                                        <div class="form-group">
                                            <div class="toggle-switch">
                                                <input type="checkbox" id="levelUpMessage" class="toggle-input" checked>
                                                <label for="levelUpMessage" class="toggle-label">
                                                    <span class="toggle-text" data-translate="xp_system.level_up_messages">Show Level Up Messages</span>
                                                </label>
                                            </div>
                                        </div>

                                        <div class="form-group">
                                            <label class="form-label" data-translate="xp_system.level_up_channel">Level Up Channel</label>
                                            <select id="levelUpChannel" class="form-select">
                                                <option value="" data-translate="xp_system.same_channel">Same as message channel</option>
                                            </select>
                                            <div class="form-hint" data-translate="xp_system.level_up_channel_description">Channel for level up announcements</div>
                                        </div>

                                        <div class="form-group">
                                            <button type="button" class="btn-secondary" id="testLevelUpBtn">
                                                <i class="fas fa-paper-plane"></i>
                                                <span data-translate="xp_system.test_level_up">Test Level Up Message</span>
                                            </button>
                                        </div>
                                    </div>

                                    <!-- Level Roles Settings -->
                                    <div class="settings-section">
                                        <h4 class="section-title">
                                            <i class="fas fa-medal me-2"></i>
                                            Level Roles
                                        </h4>
                                        <div class="form-hint mb-3">Configure roles that are automatically assigned when users reach specific levels. Users will only receive the HIGHEST level role they qualify for. Use the sync button to update all existing users retroactively.</div>
                                        
                                        <div id="levelRolesList" class="level-roles-list">
                                            <!-- Level roles will be populated here -->
                                        </div>

                                        <div class="form-group">
                                            <button type="button" class="btn-secondary" id="addLevelRoleBtn">
                                                <i class="fas fa-plus"></i>
                                                Add Level Role
                                            </button>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="form-actions">
                                    <button type="submit" class="btn-primary">
                                        <i class="fas fa-save me-2"></i>
                                        <span data-translate="xp_system.save_xp_settings">Save XP Settings</span>
                                    </button>
                                    <button type="button" class="btn-secondary">
                                        <i class="fas fa-undo me-2"></i>
                                        <span data-translate="common.reset_defaults">Reset to Defaults</span>
                                    </button>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>

                <!-- Moderation Tab -->
                <div class="tab-pane fade" id="moderation">
                    <div class="content-card">
                        <div class="card-header">
                            <h3 class="card-title" data-translate="moderation.title">
                                <i class="fas fa-shield-alt me-2"></i>
                                Moderation Tools
                            </h3>
                        </div>
                        <div class="card-content">
                            <div class="settings-grid">
                                <!-- Moderation Actions -->
                                <div class="settings-section">
                                    <h4 class="section-title" data-translate="moderation.execute_action">Execute Action</h4>
                                    
                                    <div class="form-group">
                                        <label class="form-label" data-translate="moderation.select_member">Select Member</label>
                                        <select id="memberSelect" class="form-select">
                                            <option value="" data-translate="moderation.choose_member">Choose a member...</option>
                                        </select>
                                    </div>

                                    <div class="form-group">
                                        <label class="form-label" data-translate="moderation.action">Action</label>
                                        <select id="moderationAction" class="form-select">
                                            <option value="" data-translate="moderation.select_action">Select action...</option>
                                            <option value="warn" data-translate="moderation.warn">Warn</option>
                                            <option value="timeout" data-translate="moderation.timeout">Timeout</option>
                                            <option value="kick" data-translate="moderation.kick">Kick</option>
                                            <option value="ban" data-translate="moderation.ban">Ban</option>
                                        </select>
                                    </div>

                                    <div class="form-group" id="timeoutDuration" style="display: none;">
                                        <label class="form-label" data-translate="moderation.timeout_duration">Timeout Duration (minutes)</label>
                                        <input type="number" id="timeoutMinutes" class="form-input" min="1" max="10080" value="60">
                                    </div>

                                    <div class="form-group">
                                        <label class="form-label" data-translate="moderation.reason">Reason</label>
                                        <textarea id="moderationReason" class="form-textarea" rows="3" data-translate="moderation.reason_placeholder" placeholder="Enter reason for this action..."></textarea>
                                    </div>

                                    <div class="form-group">
                                        <label class="form-label" data-translate="moderation.notification_channel">Notification Channel</label>
                                        <select id="moderationChannel" class="form-select">
                                            <option value="" data-translate="moderation.no_notification">No notification</option>
                                        </select>
                                        <div class="form-hint" data-translate="moderation.notification_channel_description">Channel to log this action</div>
                                    </div>

                                    <div class="form-actions">
                                        <button type="button" class="btn-danger" id="executeModerationBtn">
                                            <i class="fas fa-gavel me-2"></i>
                                            <span data-translate="moderation.execute_action">Execute Action</span>
                                        </button>
                                    </div>
                                </div>

                                <!-- Moderation History -->
                                <div class="settings-section">
                                    <h4 class="section-title" data-translate="moderation.recent_actions">Recent Actions</h4>
                                    <div class="table-container">
                                        <table class="modern-table">
                                            <thead>
                                                <tr>
                                                    <th data-translate="common.user">User</th>
                                                    <th data-translate="moderation.action">Action</th>
                                                    <th data-translate="common.date">Date</th>
                                                </tr>
                                            </thead>
                                            <tbody id="moderationHistoryTable">
                                                <tr>
                                                    <td colspan="3" class="no-data" data-translate="overview.no_history">No moderation history</td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Welcome System Tab -->
                <div class="tab-pane fade" id="welcome">
                    <div class="content-card">
                        <div class="card-header">
                            <h3 class="card-title">
                                <i class="fas fa-door-open me-2"></i>
                                Welcome System Configuration
                            </h3>
                        </div>
                        <div class="card-content">
                            <form id="welcomeSettingsForm">
                                <div class="settings-grid">
                                    <!-- Welcome Settings -->
                                    <div class="settings-section">
                                        <h4 class="section-title">Welcome Messages</h4>
                                        
                                        <div class="form-group">
                                            <div class="toggle-switch">
                                                <input type="checkbox" id="welcomeEnabled" class="toggle-input">
                                                <label for="welcomeEnabled" class="toggle-label">
                                                    <span class="toggle-text">Enable Welcome Messages</span>
                                                </label>
                                            </div>
                                        </div>

                                        <div class="form-group">
                                            <label class="form-label">Welcome Channel</label>
                                            <select id="welcomeChannel" class="form-select">
                                                <option value="">Select a channel...</option>
                                            </select>
                                            <div class="form-hint">Channel where welcome messages will be sent</div>
                                        </div>

                                        <div class="form-group">
                                            <label class="form-label">Welcome Title</label>
                                            <input type="text" id="welcomeTitle" class="form-control" placeholder="👋 New member!" maxlength="256">
                                            <div class="form-hint">Title displayed at the top of the welcome embed (max 256 characters)</div>
                                        </div>

                                        <div class="form-group">
                                            <label class="form-label">Welcome Message</label>
                                            <textarea id="welcomeMessage" class="form-textarea" rows="4" placeholder="Welcome {user} to {server}!"></textarea>
                                            <div class="form-hint">
                                                <strong>Available placeholders:</strong><br>
                                                <code>{user}</code> - Member mention (@User) • 
                                                <code>{server}</code> - Server name • 
                                                <code>{username}</code> - Username<br>
                                                <code>{displayname}</code> - Display name • 
                                                <code>{memberCount}</code> - Current member count
                                            </div>
                                        </div>

                                        <div class="form-group">
                                            <div class="toggle-switch">
                                                <input type="checkbox" id="welcomeFields" class="toggle-input">
                                                <label for="welcomeFields" class="toggle-label">
                                                    <span class="toggle-text">Add Custom Fields</span>
                                                </label>
                                            </div>
                                            <div class="form-hint">Add custom fields to the welcome embed</div>
                                        </div>

                                        <div id="welcomeFieldsContainer" style="display: none;">
                                            <div class="form-group">
                                                <label class="form-label">Custom Fields</label>
                                                <div id="welcomeFieldsList">
                                                    <!-- Dynamic fields will be added here -->
                                                </div>
                                                <button type="button" class="add-field-btn" id="addWelcomeField">
                                                    <i class="fas fa-plus me-2"></i>Add Field
                                                </button>
                                                <div class="form-hint">
                                                    <strong>Available placeholders:</strong> {user}, {server}, {username}, {displayname}, {memberCount}
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <!-- Goodbye Settings -->
                                    <div class="settings-section">
                                        <h4 class="section-title">Goodbye Messages</h4>
                                        
                                        <div class="form-group">
                                            <div class="toggle-switch">
                                                <input type="checkbox" id="goodbyeEnabled" class="toggle-input">
                                                <label for="goodbyeEnabled" class="toggle-label">
                                                    <span class="toggle-text">Enable Goodbye Messages</span>
                                                </label>
                                            </div>
                                        </div>

                                        <div class="form-group">
                                            <label class="form-label">Goodbye Channel</label>
                                            <select id="goodbyeChannel" class="form-select">
                                                <option value="">Select a channel...</option>
                                            </select>
                                            <div class="form-hint">Channel where goodbye messages will be sent</div>
                                        </div>

                                        <div class="form-group">
                                            <label class="form-label">Goodbye Title</label>
                                            <input type="text" id="goodbyeTitle" class="form-control" placeholder="👋 Departure" maxlength="256">
                                            <div class="form-hint">Title displayed at the top of the goodbye embed (max 256 characters)</div>
                                        </div>

                                        <div class="form-group">
                                            <label class="form-label">Goodbye Message</label>
                                            <textarea id="goodbyeMessage" class="form-textarea" rows="4" placeholder="Goodbye {user}, thanks for being part of {server}!"></textarea>
                                            <div class="form-hint">
                                                <strong>Available placeholders:</strong><br>
                                                <code>{user}</code> - Member mention (@User) • 
                                                <code>{server}</code> - Server name • 
                                                <code>{username}</code> - Username<br>
                                                <code>{displayname}</code> - Display name • 
                                                <code>{memberCount}</code> - Current member count
                                            </div>
                                        </div>

                                        <div class="form-group">
                                            <div class="toggle-switch">
                                                <input type="checkbox" id="goodbyeFields" class="toggle-input">
                                                <label for="goodbyeFields" class="toggle-label">
                                                    <span class="toggle-text">Add Custom Fields</span>
                                                </label>
                                            </div>
                                            <div class="form-hint">Add custom fields to the goodbye embed</div>
                                        </div>

                                        <div id="goodbyeFieldsContainer" style="display: none;">
                                            <div class="form-group">
                                                <label class="form-label">Custom Fields</label>
                                                <div id="goodbyeFieldsList">
                                                    <!-- Dynamic fields will be added here -->
                                                </div>
                                                <button type="button" class="add-field-btn" id="addGoodbyeField">
                                                    <i class="fas fa-plus me-2"></i>Add Field
                                                </button>
                                                <div class="form-hint">
                                                    <strong>Available placeholders:</strong> {user}, {server}, {username}, {displayname}, {memberCount}
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <!-- Auto-Role Settings -->
                                    <div class="settings-section">
                                        <h4 class="section-title">Auto-Role Assignment</h4>
                                        
                                        <div class="form-group">
                                            <div class="toggle-switch">
                                                <input type="checkbox" id="autoRoleEnabled" class="toggle-input">
                                                <label for="autoRoleEnabled" class="toggle-label">
                                                    <span class="toggle-text">Enable Auto-Role Assignment</span>
                                                </label>
                                            </div>
                                            <div class="form-hint">Automatically assign roles to new members when they join</div>
                                        </div>

                                        <div class="form-group" id="autoRoleContainer" style="display: none;">
                                            <label class="form-label">Roles to Assign</label>
                                            <div class="multi-select-container">
                                                <div class="selected-roles" id="selectedRoles">
                                                    <!-- Selected roles will appear here -->
                                                </div>
                                                <select id="roleSelect" class="form-select" multiple>
                                                    <option value="">Select roles...</option>
                                                </select>
                                            </div>
                                            <div class="form-hint">
                                                <i class="fas fa-info-circle me-1"></i>
                                                Selected roles will be automatically assigned to new members. 
                                                The bot must have permission to assign these roles and they must be below the bot's highest role.
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="form-actions">
                                    <button type="submit" class="btn-primary">
                                        <i class="fas fa-save me-2"></i>
                                        Save Welcome Settings
                                    </button>
                                    <button type="button" class="btn-secondary" id="testWelcomeBtn">
                                        <i class="fas fa-paper-plane me-2"></i>
                                        Test Welcome Message
                                    </button>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>

                <!-- Role Menus Tab -->
                <div class="tab-pane fade" id="role-menus">
                    <div class="content-card">
                        <div class="card-header">
                            <h3 class="card-title">
                                <i class="fas fa-list me-2"></i>
                                Role Menu Management
                            </h3>
                            <div class="card-actions">
                                <button class="action-btn-small" type="button" id="refreshRoleMenusBtn">
                                    <i class="fas fa-sync-alt"></i>
                                    <span>Refresh</span>
                                </button>
                                <button class="action-btn-small" type="button" id="createRoleMenuBtn">
                                    <span>Create Menu</span>
                                </button>
                            </div>
                        </div>
                        <div class="card-content">
                            <!-- Role Menus List -->
                            <div class="role-menus-container">
                                <div class="role-menus-list" id="roleMenusList">
                                    <!-- Role menus will be loaded here dynamically -->
                                </div>
                                <div class="empty-state" id="roleMenusEmpty">
                                    <i class="fas fa-list-ul fa-3x"></i>
                                    <h3>No Role Menus Found</h3>
                                    <p>Create your first role menu to get started!</p>
                                    <button class="btn-primary" onclick="document.getElementById('createRoleMenuBtn').click()">
                                        Create Role Menu
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Server Logs Tab -->
                <div class="tab-pane fade" id="logs">
                    <div class="content-card">
                        <div class="card-header">
                            <h3 class="card-title">
                                <i class="fas fa-file-alt me-2"></i>
                                Server Logs Configuration
                            </h3>
                        </div>
                        <div class="card-content">
                            <form id="logsSettingsForm">
                                <div class="settings-grid">
                                    <!-- General Log Settings -->
                                    <div class="settings-section">
                                        <h4 class="section-title">General Settings</h4>
                                        
                                        <div class="form-group">
                                            <div class="toggle-switch">
                                                <input type="checkbox" id="serverLogsEnabled" class="toggle-input">
                                                <label for="serverLogsEnabled" class="toggle-label">
                                                    <span class="toggle-text">Enable Server Logs</span>
                                                </label>
                                            </div>
                                        </div>

                                        <div class="form-group">
                                            <label class="form-label">Logs Channel</label>
                                            <select id="serverLogsChannel" class="form-select">
                                                <option value="">Select a channel...</option>
                                            </select>
                                            <div class="form-hint">Channel where server logs will be sent</div>
                                        </div>
                                    </div>

                                    <!-- Log Event Types -->
                                    <div class="settings-section">
                                        <h4 class="section-title">Log Events</h4>
                                        
                                        <div class="toggle-grid">
                                            <div class="form-group">
                                                <div class="toggle-switch">
                                                    <input type="checkbox" id="logMessageDelete" class="toggle-input">
                                                    <label for="logMessageDelete" class="toggle-label">
                                                        <span class="toggle-text">
                                                            <i class="fas fa-trash-alt"></i>
                                                            Message Deletions
                                                        </span>
                                                    </label>
                                                </div>
                                            </div>

                                            <div class="form-group">
                                                <div class="toggle-switch">
                                                    <input type="checkbox" id="logMessageEdit" class="toggle-input">
                                                    <label for="logMessageEdit" class="toggle-label">
                                                        <span class="toggle-text">
                                                            <i class="fas fa-edit"></i>
                                                            Message Edits
                                                        </span>
                                                    </label>
                                                </div>
                                            </div>

                                            <div class="form-group">
                                                <div class="toggle-switch">
                                                    <input type="checkbox" id="logMemberJoin" class="toggle-input">
                                                    <label for="logMemberJoin" class="toggle-label">
                                                        <span class="toggle-text">
                                                            <i class="fas fa-user-plus"></i>
                                                            Member Joins
                                                        </span>
                                                    </label>
                                                </div>
                                            </div>

                                            <div class="form-group">
                                                <div class="toggle-switch">
                                                    <input type="checkbox" id="logMemberLeave" class="toggle-input">
                                                    <label for="logMemberLeave" class="toggle-label">
                                                        <span class="toggle-text">
                                                            <i class="fas fa-user-minus"></i>
                                                            Member Leaves
                                                        </span>
                                                    </label>
                                                </div>
                                            </div>

                                            <div class="form-group">
                                                <div class="toggle-switch">
                                                    <input type="checkbox" id="logMemberUpdate" class="toggle-input">
                                                    <label for="logMemberUpdate" class="toggle-label">
                                                        <span class="toggle-text">
                                                            <i class="fas fa-user-edit"></i>
                                                            Member Updates
                                                        </span>
                                                    </label>
                                                </div>
                                            </div>

                                            <div class="form-group">
                                                <div class="toggle-switch">
                                                    <input type="checkbox" id="logVoiceStateUpdate" class="toggle-input">
                                                    <label for="logVoiceStateUpdate" class="toggle-label">
                                                        <span class="toggle-text">
                                                            <i class="fas fa-microphone"></i>
                                                            Voice State Changes
                                                        </span>
                                                    </label>
                                                </div>
                                            </div>

                                            <div class="form-group">
                                                <div class="toggle-switch">
                                                    <input type="checkbox" id="logRoleCreate" class="toggle-input">
                                                    <label for="logRoleCreate" class="toggle-label">
                                                        <span class="toggle-text">
                                                            <i class="fas fa-plus-circle"></i>
                                                            Role Creation
                                                        </span>
                                                    </label>
                                                </div>
                                            </div>

                                            <div class="form-group">
                                                <div class="toggle-switch">
                                                    <input type="checkbox" id="logRoleDelete" class="toggle-input">
                                                    <label for="logRoleDelete" class="toggle-label">
                                                        <span class="toggle-text">
                                                            <i class="fas fa-minus-circle"></i>
                                                            Role Deletion
                                                        </span>
                                                    </label>
                                                </div>
                                            </div>

                                            <div class="form-group">
                                                <div class="toggle-switch">
                                                    <input type="checkbox" id="logRoleUpdate" class="toggle-input">
                                                    <label for="logRoleUpdate" class="toggle-label">
                                                        <span class="toggle-text">
                                                            <i class="fas fa-edit"></i>
                                                            Role Updates
                                                        </span>
                                                    </label>
                                                </div>
                                            </div>

                                            <div class="form-group">
                                                <div class="toggle-switch">
                                                    <input type="checkbox" id="logChannelCreate" class="toggle-input">
                                                    <label for="logChannelCreate" class="toggle-label">
                                                        <span class="toggle-text">
                                                            <i class="fas fa-hashtag"></i>
                                                            Channel Creation
                                                        </span>
                                                    </label>
                                                </div>
                                            </div>

                                            <div class="form-group">
                                                <div class="toggle-switch">
                                                    <input type="checkbox" id="logChannelDelete" class="toggle-input">
                                                    <label for="logChannelDelete" class="toggle-label">
                                                        <span class="toggle-text">
                                                            <i class="fas fa-hashtag"></i>
                                                        <span class="toggle-text">
                                                            <i class="fas fa-hashtag"></i>
                                                            Channel Deletion
                                                        </span>
                                                    </label>
                                                </div>
                                            </div>

                                            <div class="form-group">
                                                <div class="toggle-switch">
                                                    <input type="checkbox" id="logChannelUpdate" class="toggle-input">
                                                    <label for="logChannelUpdate" class="toggle-label">
                                                        <span class="toggle-text">
                                                            <i class="fas fa-hashtag"></i>
                                                            Channel Updates
                                                        </span>
                                                    </label>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="form-actions">
                                    <button type="submit" class="btn-primary">
                                        <i class="fas fa-save me-2"></i>
                                        Save Log Settings
                                    </button>
                                    <button type="button" class="btn-secondary" id="testLogBtn">
                                        <i class="fas fa-paper-plane me-2"></i>
                                        Test Log Message
                                    </button>
                                    <button type="button" class="btn-outline" onclick="dashboard.toggleAllLogs(true)">
                                        <i class="fas fa-check-square me-2"></i>
                                        Enable All
                                    </button>
                                    <button type="button" class="btn-outline" onclick="dashboard.toggleAllLogs(false)">
                                        <i class="fas fa-square me-2"></i>
                                        Disable All
                                    </button>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
                
                <!-- Ticket System -->
                <div class="tab-pane fade" id="tickets">
                    <div class="content-card">
                        <div class="card-header">
                            <h3 class="card-title">
                                <i class="fas fa-ticket-alt me-2"></i>
                                Ticket System Configuration
                            </h3>
                        </div>
                        <div class="card-content">
                            <!-- System Toggle -->
                            <div class="settings-section">
                                <h4 class="section-title">General Settings</h4>
                                
                                <div class="form-group">
                                    <div class="toggle-switch">
                                        <input type="checkbox" id="ticketSystemEnabled" class="toggle-input">
                                        <label for="ticketSystemEnabled" class="toggle-label">
                                            <span class="toggle-text">Enable Ticket System</span>
                                        </label>
                                    </div>
                                </div>
                            </div>

                            <!-- Ticket Panels -->
                            <div class="settings-section" id="ticketPanelsSection" style="display: none;">
                                <div class="section-header">
                                    <h4 class="section-title">Ticket Panels</h4>
                                    <button type="button" class="btn-primary" onclick="dashboard.createTicketPanel()">
                                        <i class="fas fa-plus me-2"></i>
                                        Create Panel
                                    </button>
                                </div>
                                
                                <div class="panels-list" id="ticketPanelsList">
                                    <!-- Panels will be loaded here -->
                                </div>
                                
                                <!-- No panels message -->
                                <div class="empty-state" id="ticketPanelsEmpty" style="display: none;">
                                    <div class="empty-icon">
                                        <i class="fas fa-ticket-alt"></i>
                                    </div>
                                    <h4>No Ticket Panels</h4>
                                    <p>Create your first ticket panel to get started</p>
                                    <button type="button" class="btn-primary" onclick="dashboard.createTicketPanel()">
                                        <i class="fas fa-plus me-2"></i>
                                        Create First Panel
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Ticket Logs System -->
                <div class="tab-pane fade" id="ticket-logs">
                    <div class="content-card">
                        <div class="card-header">
                            <h3 class="card-title">
                                <i class="fas fa-history me-2"></i>
                                Ticket Logs Consultation
                            </h3>
                            <p class="card-subtitle">Consultez les logs des tickets archivés</p>
                        </div>
                        <div class="card-content">
                            <!-- User Selection -->
                            <div class="settings-section">
                                <h4 class="section-title">
                                    <i class="fas fa-user-search me-2"></i>
                                    Sélection d'utilisateur
                                </h4>
                                <div class="form-group">
                                    <label class="form-label">Rechercher un utilisateur</label>
                                    <div class="input-group">
                                        <input type="text" id="userSearchInput" class="form-input" placeholder="Nom d'utilisateur ou ID Discord">
                                        <button type="button" class="btn-primary" onclick="dashboard.searchUser()">
                                            <i class="fas fa-search me-2"></i>
                                            Rechercher
                                        </button>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- User Results -->
                            <div class="settings-section" id="userResultsSection" style="display: none;">
                                <h4 class="section-title">
                                    <i class="fas fa-search me-2"></i>
                                    Résultats de recherche
                                </h4>
                                <div id="userResultsList" class="users-list">
                                    <!-- Users will be populated here -->
                                </div>
                            </div>
                            
                            <!-- Selected User Tickets -->
                            <div class="settings-section" id="userTicketsSection" style="display: none;">
                                <h4 class="section-title">
                                    <i class="fas fa-ticket-alt me-2"></i>
                                    Tickets de l'utilisateur
                                </h4>
                                <div class="user-info" id="selectedUserInfo">
                                    <!-- Selected user info will be shown here -->
                                </div>
                                <div id="userTicketsList" class="tickets-list">
                                    <!-- Tickets will be populated here -->
                                </div>
                                <div class="empty-state" id="noTicketsState" style="display: none;">
                                    <div class="empty-icon">
                                        <i class="fas fa-ticket-alt"></i>
                                    </div>
                                    <h4>Aucun ticket trouvé</h4>
                                    <p>Cet utilisateur n'a pas encore créé de tickets</p>
                                </div>
                            </div>
                            
                            <!-- Ticket Details Modal -->
                            <div class="modal fade" id="ticketDetailsModal" tabindex="-1">
                                <div class="modal-dialog modal-xl">
                                    <div class="modal-content">
                                        <div class="modal-header">
                                            <h5 class="modal-title" id="ticketDetailsModalTitle">Détails du ticket</h5>
                                            <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                                        </div>
                                        <div class="modal-body">
                                            <div id="ticketDetailsContent">
                                                <!-- Ticket details will be loaded here -->
                                            </div>
                                        </div>
                                        <div class="modal-footer">
                                            <button type="button" class="btn-outline" data-bs-dismiss="modal">Fermer</button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Embed Creator System -->
                <div class="tab-pane fade" id="embed">
                    <div class="content-card">
                        <div class="card-header">
                            <h3 class="card-title">
                                <i class="fas fa-code me-2"></i>
                                Embed Creator
                            </h3>
                            <p class="card-subtitle">Create and send custom embed messages to any channel</p>
                        </div>
                        <div class="card-content">
                            <form id="embedCreatorForm">
                                <div class="settings-grid">
                                    <!-- Target Settings -->
                                    <div class="settings-section">
                                        <h4 class="section-title">Target Settings</h4>
                                        
                                        <div class="form-group">
                                            <label class="form-label">Target Channel <span class="required">*</span></label>
                                            <select id="embedTargetChannel" class="form-select" required>
                                                <option value="">Select a channel...</option>
                                            </select>
                                            <div class="form-hint">Channel where the embed will be sent</div>
                                        </div>

                                        <div class="form-group">
                                            <label class="form-label">Ping Settings</label>
                                            <div class="ping-options">
                                                <div class="form-group">
                                                    <div class="toggle-switch">
                                                        <input type="checkbox" id="embedPingRole" class="toggle-input">
                                                        <label for="embedPingRole" class="toggle-label">
                                                            <span class="toggle-text">Ping Role</span>
                                                        </label>
                                                    </div>
                                                </div>
                                                
                                                <div class="form-group" id="embedRoleSelector" style="display: none;">
                                                    <select id="embedPingRoleSelect" class="form-select">
                                                        <option value="">Select a role...</option>
                                                    </select>
                                                </div>

                                                <div class="form-group">
                                                    <div class="toggle-switch">
                                                        <input type="checkbox" id="embedPingUser" class="toggle-input">
                                                        <label for="embedPingUser" class="toggle-label">
                                                            <span class="toggle-text">Ping User</span>
                                                        </label>
                                                    </div>
                                                </div>
                                                
                                                <div class="form-group" id="embedUserSelector" style="display: none;">
                                                    <select id="embedPingUserSelect" class="form-select">
                                                        <option value="">Select a member...</option>
                                                    </select>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <!-- Embed Content -->
                                    <div class="settings-section">
                                        <h4 class="section-title">Embed Content</h4>
                                        
                                        <div class="form-group">
                                            <label class="form-label">Title</label>
                                            <input type="text" id="embedTitle" class="form-control" placeholder="Embed title..." maxlength="256">
                                            <div class="form-hint">Maximum 256 characters</div>
                                        </div>

                                        <div class="form-group">
                                            <label class="form-label">Description</label>
                                            <textarea id="embedDescription" class="form-textarea" rows="4" placeholder="Embed description..." maxlength="4096"></textarea>
                                            <div class="form-hint">Maximum 4096 characters. Supports Discord markdown</div>
                                        </div>

                                        <div class="form-group">
                                            <label class="form-label">Color</label>
                                            <div class="color-picker-group">
                                                <input type="color" id="embedColor" class="form-input color-picker" value="#5865F2">
                                                <div class="color-presets">
                                                    <button type="button" class="color-preset" data-color="#5865F2" title="Discord Blurple"></button>
                                                    <button type="button" class="color-preset" data-color="#57F287" title="Green"></button>
                                                    <button type="button" class="color-preset" data-color="#FEE75C" title="Yellow"></button>
                                                    <button type="button" class="color-preset" data-color="#ED4245" title="Red"></button>
                                                    <button type="button" class="color-preset" data-color="#EB459E" title="Pink"></button>
                                                    <button type="button" class="color-preset" data-color="#00D9FF" title="Cyan"></button>
                                                </div>
                                            </div>
                                            <div class="form-hint">Click color presets or use the color picker</div>
                                        </div>
                                    </div>

                                    <!-- Media Settings -->
                                    <div class="settings-section">
                                        <h4 class="section-title">Media & Images</h4>
                                        
                                        <div class="form-group">
                                            <label class="form-label">Thumbnail URL</label>
                                            <input type="url" id="embedThumbnail" class="form-control" placeholder="https://example.com/image.png">
                                            <div class="form-hint">Small image displayed in the top-right corner</div>
                                        </div>

                                        <div class="form-group">
                                            <label class="form-label">Image URL</label>
                                            <input type="url" id="embedImage" class="form-control" placeholder="https://example.com/image.png">
                                            <div class="form-hint">Large image displayed in the embed</div>
                                        </div>
                                    </div>

                                    <!-- Author & Footer -->
                                    <div class="settings-section">
                                        <h4 class="section-title">Author & Footer</h4>
                                        
                                        <div class="form-group">
                                            <div class="toggle-switch">
                                                <input type="checkbox" id="embedAuthorEnabled" class="toggle-input">
                                                <label for="embedAuthorEnabled" class="toggle-label">
                                                    <span class="toggle-text">Add Author</span>
                                                </label>
                                            </div>
                                        </div>

                                        <div id="embedAuthorContainer" style="display: none;">
                                            <div class="form-group">
                                                <label class="form-label">Author Name</label>
                                                <input type="text" id="embedAuthorName" class="form-control" placeholder="Author name..." maxlength="256">
                                            </div>

                                            <div class="form-group">
                                                <label class="form-label">Author Icon URL</label>
                                                <input type="url" id="embedAuthorIcon" class="form-control" placeholder="https://example.com/icon.png">
                                            </div>

                                            <div class="form-group">
                                                <label class="form-label">Author URL</label>
                                                <input type="url" id="embedAuthorUrl" class="form-control" placeholder="https://example.com">
                                            </div>
                                        </div>

                                        <div class="form-group">
                                            <div class="toggle-switch">
                                                <input type="checkbox" id="embedFooterEnabled" class="toggle-input">
                                                <label for="embedFooterEnabled" class="toggle-label">
                                                    <span class="toggle-text">Add Footer</span>
                                                </label>
                                            </div>
                                        </div>

                                        <div id="embedFooterContainer" style="display: none;">
                                            <div class="form-group">
                                                <label class="form-label">Footer Text</label>
                                                <input type="text" id="embedFooterText" class="form-control" placeholder="Footer text..." maxlength="2048">
                                            </div>

                                            <div class="form-group">
                                                <label class="form-label">Footer Icon URL</label>
                                                <input type="url" id="embedFooterIcon" class="form-control" placeholder="https://example.com/icon.png">
                                            </div>

                                            <div class="form-group">
                                                <div class="toggle-switch">
                                                    <input type="checkbox" id="embedTimestamp" class="toggle-input">
                                                    <label for="embedTimestamp" class="toggle-label">
                                                        <span class="toggle-text">Add Timestamp</span>
                                                    </label>
                                                </div>
                                                <div class="form-hint">Adds current date/time to footer</div>
                                            </div>
                                        </div>
                                    </div>

                                    <!-- Custom Fields -->
                                    <div class="settings-section">
                                        <h4 class="section-title">Custom Fields</h4>
                                        
                                        <div class="form-group">
                                            <div class="toggle-switch">
                                                <input type="checkbox" id="embedFieldsEnabled" class="toggle-input">
                                                <label for="embedFieldsEnabled" class="toggle-label">
                                                    <span class="toggle-text">Add Custom Fields</span>
                                                </label>
                                            </div>
                                            <div class="form-hint">Add additional fields to organize content</div>
                                        </div>

                                        <div id="embedFieldsContainer" style="display: none;">
                                            <div class="form-group">
                                                <label class="form-label">Fields</label>
                                                <div id="embedFieldsList">
                                                    <!-- Dynamic fields will be added here -->
                                                </div>
                                                <button type="button" class="add-field-btn" id="addEmbedField">
                                                    <i class="fas fa-plus me-2"></i>Add Field
                                                </button>
                                                <div class="form-hint">Maximum 25 fields, each field has a limit of 1024 characters for both name and value</div>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <!-- Preview Section -->
                                <div class="settings-section">
                                    <h4 class="section-title">Preview</h4>
                                    <div class="embed-preview-container">
                                        <div id="embedPreview" class="discord-embed">
                                            <div class="embed-content">
                                                <div class="embed-title-preview">Preview your embed here</div>
                                                <div class="embed-description-preview">Fill in the fields above to see a live preview</div>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <!-- Actions -->
                                <div class="form-actions">
                                    <button type="button" class="btn-primary" id="sendEmbedBtn">
                                        <i class="fas fa-paper-plane me-2"></i>
                                        Send Embed
                                    </button>
                                    <button type="button" class="btn-secondary" id="previewEmbedBtn">
                                        <i class="fas fa-eye me-2"></i>
                                        Refresh Preview
                                    </button>
                                    <button type="button" class="btn-outline" id="clearEmbedBtn">
                                        <i class="fas fa-trash me-2"></i>
                                        Clear All
                                    </button>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- Ticket Panel Modal -->
    <div class="modal fade" id="ticketPanelModal" tabindex="-1">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="ticketPanelModalTitle">Create Ticket Panel</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <form id="ticketPanelForm">
                        <input type="hidden" id="ticketPanelId">
                        
                        <!-- Basic Panel Settings -->
                        <div class="form-group">
                            <label class="form-label">Panel Name</label>
                            <input type="text" id="ticketPanelName" class="form-input" required>
                            <div class="form-hint">Internal name for this ticket panel</div>
                        </div>

                        <!-- Embed Customization -->
                        <div class="settings-section">
                            <h5 class="section-title">Embed Message</h5>
                            
                            <div class="form-group">
                                <label class="form-label">Title</label>
                                <input type="text" id="ticketEmbedTitle" class="form-input" value="🎫 Support Tickets">
                            </div>

                            <div class="form-group">
                                <label class="form-label">Description</label>
                                <textarea id="ticketEmbedDescription" class="form-textarea" rows="3">Click a button below to create a support ticket</textarea>
                            </div>

                            <div class="form-group">
                                <label class="form-label">Color</label>
                                <input type="color" id="ticketEmbedColor" class="form-input" value="#5865F2">
                            </div>

                            <div class="form-group">
                                <label class="form-label">Thumbnail URL (optional)</label>
                                <input type="url" id="ticketEmbedThumbnail" class="form-input" placeholder="https://example.com/image.png">
                            </div>

                            <div class="form-group">
                                <label class="form-label">Footer Text (optional)</label>
                                <input type="text" id="ticketEmbedFooter" class="form-input" placeholder="Support Team">
                            </div>
                        </div>

                        <!-- Buttons Configuration -->
                        <div class="settings-section">
                            <div class="section-header">
                                <h5 class="section-title">Ticket Buttons</h5>
                                <button type="button" class="btn-outline" onclick="dashboard.addTicketButton()">
                                    <i class="fas fa-plus me-2"></i>
                                    Add Button
                                </button>
                            </div>
                            
                            <div class="buttons-list" id="ticketButtonsList">
                                <!-- Buttons will be added here -->
                            </div>
                            
                            <div class="form-hint">Create multiple buttons for different ticket categories</div>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn-secondary" data-bs-dismiss="modal">Cancel</button>
                    <button type="button" class="btn-primary" onclick="dashboard.saveTicketPanel()">
                        <i class="fas fa-save me-2"></i>
                        Save Panel
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Ticket Button Template -->
    <template id="ticketButtonTemplate">
        <div class="button-config-item">
            <div class="button-header">
                <h6 class="button-title">Ticket Button</h6>
                <button type="button" class="btn-sm btn-danger" onclick="dashboard.removeTicketButton(this)">
                    <i class="fas fa-trash"></i>
                </button>
            </div>
            
            <div class="button-settings">
                <div class="form-row">
                    <div class="form-group">
                        <label class="form-label">Button Label</label>
                        <input type="text" class="form-input button-label" placeholder="Support Ticket" required>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Emoji (optional)</label>
                        <input type="text" class="form-input button-emoji" placeholder="🎫">
                    </div>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label class="form-label">Button Style</label>
                        <select class="form-select button-style">
                            <option value="primary">Primary (Blue)</option>
                            <option value="secondary">Secondary (Gray)</option>
                            <option value="success">Success (Green)</option>
                            <option value="danger">Danger (Red)</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Category</label>
                        <select class="form-select button-category">
                            <option value="">Select category...</option>
                        </select>
                    </div>
                </div>
                
                <div class="form-group">
                    <label class="form-label">Ticket Name Format</label>
                    <input type="text" class="form-input button-name-format" value="ticket-{username}" placeholder="ticket-{username}">
                    <div class="form-hint">Use {username}, {userid}, {category} as placeholders</div>
                </div>
                
                <div class="form-group">
                    <label class="form-label">Ping Roles (optional)</label>
                    <div class="ping-roles-container">
                        <select class="form-select ping-roles-select" multiple>
                            <!-- Roles will be loaded here -->
                        </select>
                    </div>
                    <div class="form-hint">Roles to ping when a ticket is created</div>
                </div>
                
                <div class="form-group">
                    <label class="form-label">Initial Message (optional)</label>
                    <textarea class="form-textarea button-initial-message" rows="2" placeholder="Thank you for creating a ticket! Our team will be with you shortly."></textarea>
                </div>
            </div>
        </div>
    </template>

    <!-- Ticket Panel Item Template -->
    <template id="ticketPanelItemTemplate">
        <div class="panel-item">
            <div class="panel-header">
                <div class="panel-info">
                    <h5 class="panel-name"></h5>
                    <p class="panel-details"></p>
                </div>
                <div class="panel-actions">
                    <button type="button" class="btn-sm btn-outline" onclick="dashboard.editTicketPanel(this)">
                        <i class="fas fa-edit"></i>
                        Edit
                    </button>
                    <button type="button" class="btn-sm btn-primary" onclick="dashboard.deployTicketPanel(this)">
                        <i class="fas fa-paper-plane"></i>
                        Deploy
                    </button>
                    <button type="button" class="btn-sm btn-danger" onclick="dashboard.deleteTicketPanel(this)">
                        <i class="fas fa-trash"></i>
                        Delete
                    </button>
                </div>
            </div>
            
            <div class="panel-preview">
                <div class="embed-preview">
                    <div class="embed-title"></div>
                    <div class="embed-description"></div>
                    <div class="embed-buttons"></div>
                </div>
            </div>
        </div>
    </template>

    <!-- Deploy Panel Modal -->
    <div class="modal fade" id="deployPanelModal" tabindex="-1">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Deploy Ticket Panel</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <div class="form-group">
                        <label class="form-label">Select Channel</label>
                        <select id="deployChannelSelect" class="form-select">
                            <option value="">Select a channel...</option>
                        </select>
                        <div class="form-hint">Choose where to send the ticket panel message</div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn-secondary" data-bs-dismiss="modal">Cancel</button>
                    <button type="button" class="btn-primary" onclick="dashboard.confirmDeployPanel()">
                        <i class="fas fa-paper-plane me-2"></i>
                        Deploy Panel
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="bg-secondary py-3 mt-4">
        <div class="container-fluid text-center">
            <p class="mb-1 text-muted">
                <small>&copy; 2025 Maybee Dashboard. Built with 🍯 for Discord communities.</small>
            </p>
            <p class="mb-0 text-muted">
                <small>
                    Created by <strong>iMutig</strong> | 
                    <i class="fab fa-discord me-1"></i>
                    Contact: <code>iMutig#0444</code>
                </small>
            </p>
        </div>
    </footer>

    <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        // Initialize language data from backend
        window.langData = {{ lang_data | tojson }};
        window.currentLang = "{{ current_lang }}";
        window.supportedLanguages = {{ supported_languages | tojson }};
    </script>
    <script src="/static/dashboard.js?v={{ timestamp }}"></script>
</body>
</html>
