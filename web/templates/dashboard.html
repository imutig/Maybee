<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Maybee Dashboard</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link href="/static/style.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body class="dashboard-body">
    <!-- Modern Navbar -->
    <nav class="modern-navbar">
        <div class="navbar-container">
            <div class="navbar-brand-section">
                <a class="brand-link" href="/">
                    <div class="brand-icon">
                        <i class="fas fa-bug"></i>
                    </div>
                    <span class="brand-text">Maybee</span>
                    <span class="brand-subtitle">Dashboard</span>
                </a>
            </div>
            
            <div class="navbar-actions">
                <!-- Language Selector -->
                <div class="action-item language-selector">
                    <button class="action-btn" id="languageDropdown" data-bs-toggle="dropdown" aria-expanded="false">
                        <i class="fas fa-globe"></i>
                        <span id="currentLanguage">English</span>
                        <i class="fas fa-chevron-down ms-1"></i>
                    </button>
                    <ul class="dropdown-menu modern-dropdown" id="languageMenu">
                        <!-- Language options will be populated by JavaScript -->
                    </ul>
                </div>
                
                <!-- User Menu -->
                <div class="action-item user-menu">
                    <button class="action-btn user-btn" id="userDropdown" data-bs-toggle="dropdown" aria-expanded="false">
                        <img id="userAvatar" src="" alt="Avatar" class="user-avatar" style="display: none;" data-translate="common.avatar_alt">
                        <span id="username" data-translate="common.loading">Loading...</span>
                        <i class="fas fa-chevron-down ms-1"></i>
                    </button>
                    <ul class="dropdown-menu modern-dropdown">
                        <li><a class="dropdown-item" href="#" onclick="dashboard.logout()" data-translate="navigation.logout">
                            <i class="fas fa-sign-out-alt me-2"></i>Logout
                        </a></li>
                    </ul>
                </div>
            </div>
        </div>
    </nav>

    <!-- Dashboard Layout -->
    <div class="dashboard-layout">
        <!-- Modern Sidebar -->
        <aside class="dashboard-sidebar">
            <nav class="sidebar-nav">
                <a class="nav-item active" href="#overview" data-translate="navigation.overview">
                    <div class="nav-icon">
                        <i class="fas fa-tachometer-alt"></i>
                    </div>
                    <span class="nav-text" data-translate="navigation.overview">Overview</span>
                </a>
                
                <a class="nav-item" href="#xp-settings" data-translate="navigation.xp_system">
                    <div class="nav-icon">
                        <i class="fas fa-trophy"></i>
                    </div>
                    <span class="nav-text" data-translate="navigation.xp_system">XP System</span>
                </a>
                
                <a class="nav-item" href="#moderation" data-translate="navigation.moderation">
                    <div class="nav-icon">
                        <i class="fas fa-shield-alt"></i>
                    </div>
                    <span class="nav-text" data-translate="navigation.moderation">Moderation</span>
                </a>
                
                <a class="nav-item" href="#welcome" data-translate="navigation.welcome_system">
                    <div class="nav-icon">
                        <i class="fas fa-door-open"></i>
                    </div>
                    <span class="nav-text" data-translate="navigation.welcome_system">Welcome System</span>
                </a>
                
                <a class="nav-item" href="#role-menus" data-translate="navigation.role_menus">
                    <div class="nav-icon">
                        <i class="fas fa-list"></i>
                    </div>
                    <span class="nav-text" data-translate="navigation.role_menus">Role Menus</span>
                </a>
                
                <a class="nav-item" href="#logs" data-translate="navigation.server_logs">
                    <div class="nav-icon">
                        <i class="fas fa-file-alt"></i>
                    </div>
                    <span class="nav-text" data-translate="navigation.server_logs">Server Logs</span>
                </a>
                
                <a class="nav-item" href="#tickets" data-translate="navigation.ticket_system">
                    <div class="nav-icon">
                        <i class="fas fa-ticket-alt"></i>
                    </div>
                    <span class="nav-text" data-translate="navigation.ticket_system">Ticket System</span>
                </a>
                
                <a class="nav-item" href="#ticket-logs">
                    <div class="nav-icon">
                        <i class="fas fa-history"></i>
                    </div>
                    <span class="nav-text" data-translate="navigation.ticket_logs">Logs de ticket</span>
                </a>
                
                <a class="nav-item" href="#embed" data-translate="navigation.embed_system">
                    <div class="nav-icon">
                        <i class="fas fa-code"></i>
                    </div>
                    <span class="nav-text" data-translate="navigation.embed_system">Embed Creator</span>
                </a>
            </nav>
        </aside>

        <!-- Main Content -->
        <main class="dashboard-main">
            <!-- Dashboard Header -->
            <div class="dashboard-header">
                <div class="header-left">
                    <h1 class="page-title" data-translate="navigation.dashboard">Dashboard</h1>
                    <p class="page-subtitle" data-translate="dashboard.subtitle">Manage your server settings</p>
                </div>
                
                <div class="header-right">
                    <div class="server-selector">
                        <label class="selector-label" data-translate="common.server">Server</label>
                        <select class="modern-select" id="guildSelector" onchange="dashboard.selectGuild()">
                            <option value="" data-translate="navigation.select_server">Select a server...</option>
                        </select>
                    </div>
                </div>
            </div>

            <!-- Loading overlay -->
            <div id="loadingOverlay" class="loading-overlay">
                <div class="loading-content">
                    <div class="loading-spinner">
                        <div class="spinner"></div>
                    </div>
                    <p class="loading-text" data-translate="navigation.loading_dashboard">Loading dashboard...</p>
                </div>
            </div>

            <!-- Content Container -->
            <div id="dashboardContent" class="dashboard-content" style="display: none;">
                <!-- Overview Tab -->
                <div class="tab-pane fade show active" id="overview">
                    <!-- Stats Grid -->
                    <div class="stats-grid">
                        <div class="stat-card primary">
                            <div class="stat-icon">
                                <i class="fas fa-users"></i>
                            </div>
                            <div class="stat-content">
                                <div class="stat-value" id="totalMembers">0</div>
                                <div class="stat-label" data-translate="overview.total_members">Total Members</div>
                            </div>
                        </div>
                        
                        <div class="stat-card success">
                            <div class="stat-icon">
                                <i class="fas fa-star"></i>
                            </div>
                            <div class="stat-content">
                                <div class="stat-value" id="totalXP">0</div>
                                <div class="stat-label" data-translate="overview.total_xp">Total XP Given</div>
                            </div>
                        </div>
                        
                        <div class="stat-card warning">
                            <div class="stat-icon">
                                <i class="fas fa-trophy"></i>
                            </div>
                            <div class="stat-content">
                                <div class="stat-value" id="avgLevel">0</div>
                                <div class="stat-label" data-translate="overview.average_level">Average Level</div>
                            </div>
                        </div>
                        
                        <div class="stat-card info">
                            <div class="stat-icon">
                                <i class="fas fa-chart-line"></i>
                            </div>
                            <div class="stat-content">
                                <div class="stat-value" id="recentActivity">0</div>
                                <div class="stat-label" data-translate="overview.recent_activity">Recent Activity</div>
                            </div>
                        </div>
                    </div>

                    <!-- Feur Mode (Only visible for specific guild) -->
                    <div class="content-card" id="feurModeCard" style="display: none;">
                        <div class="card-header">
                            <h3 class="card-title">🎉 Mode Feur</h3>
                        </div>
                        <div class="card-content">
                            <div class="settings-section">
                                <div class="form-group">
                                    <div class="toggle-switch">
                                        <input type="checkbox" id="feurModeEnabled" class="toggle-input" onchange="dashboard.toggleFeurMode(this.checked)">
                                        <label for="feurModeEnabled" class="toggle-label">
                                            <span class="toggle-text">Activer le mode Feur</span>
                                        </label>
                                    </div>
                                    <div class="form-hint">
                                        Quand activé, le bot répondra "Feur" à chaque message se terminant par "quoi" 😄
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Charts Section -->
                    <div class="charts-grid">
                        <!-- Member Growth Chart -->
                        <div class="content-card chart-card">
                            <div class="card-header">
                                <h3 class="card-title" data-translate="overview.member_growth">Member Growth</h3>
                                <div class="card-actions">
                                    <select class="chart-period-select" id="memberGrowthPeriod">
                                        <option value="7d" data-translate="overview.last_7_days">Last 7 days</option>
                                        <option value="30d" data-translate="overview.last_30_days">Last 30 days</option>
                                        <option value="90d" data-translate="overview.last_90_days">Last 90 days</option>
                                    </select>
                                </div>
                            </div>
                            <div class="card-content">
                                <div id="memberGrowthChartPlaceholder" class="chart-placeholder">
                                    <i class="fas fa-server"></i>
                                    <p data-translate="overview.select_server_chart">Sélectionnez un serveur pour voir les graphiques</p>
                                </div>
                                <canvas id="memberGrowthChart" width="400" height="200" style="display: none;"></canvas>
                            </div>
                        </div>

                        <!-- Activity Chart -->
                        <div class="content-card chart-card">
                            <div class="card-header">
                                <h3 class="card-title" data-translate="overview.activity_overview">Activity Overview</h3>
                                <div class="card-actions">
                                    <select class="chart-period-select" id="activityPeriod">
                                        <option value="24h" data-translate="overview.last_24_hours">Last 24 hours</option>
                                        <option value="7d" data-translate="overview.last_7_days">Last 7 days</option>
                                        <option value="30d" data-translate="overview.last_30_days">Last 30 days</option>
                                    </select>
                                </div>
                            </div>
                            <div class="card-content">
                                <div id="activityChartPlaceholder" class="chart-placeholder">
                                    <i class="fas fa-server"></i>
                                    <p data-translate="overview.select_server_chart">Sélectionnez un serveur pour voir les graphiques</p>
                                </div>
                                <canvas id="activityChart" width="400" height="200" style="display: none;"></canvas>
                            </div>
                        </div>

                        <!-- XP Distribution Chart -->
                        <div class="content-card chart-card">
                            <div class="card-header">
                                <h3 class="card-title" data-translate="overview.xp_distribution">XP Distribution</h3>
                                <div class="card-actions">
                                    <button class="action-btn-small" id="refreshXPChart">
                                        <i class="fas fa-sync-alt"></i>
                                        <span data-translate="common.refresh">Refresh</span>
                                    </button>
                                </div>
                            </div>
                            <div class="card-content">
                                <div id="xpDistributionChartPlaceholder" class="chart-placeholder">
                                    <i class="fas fa-server"></i>
                                    <p data-translate="overview.select_server_chart">Sélectionnez un serveur pour voir les graphiques</p>
                                </div>
                                <canvas id="xpDistributionChart" width="400" height="200" style="display: none;"></canvas>
                            </div>
                        </div>

                        <!-- XP Evolution Chart -->
                        <div class="content-card chart-card">
                            <div class="card-header">
                                <div class="header-left">
                                    <h3 class="card-title">
                                        <i class="fas fa-chart-line"></i>
                                        <span data-translate="overview.xp_evolution">Évolution XP</span>
                                    </h3>
                                </div>
                                <div class="header-right">
                                    <select id="xpEvolutionPeriod" class="chart-period-select">
                                        <option value="7d" data-translate="overview.last_7_days">7 derniers jours</option>
                                        <option value="30d" data-translate="overview.last_30_days">30 derniers jours</option>
                                        <option value="90d" data-translate="overview.last_90_days">90 derniers jours</option>
                                    </select>
                                    <select id="xpEvolutionType" class="chart-period-select">
                                        <option value="both">Tous les types</option>
                                        <option value="text">Texte uniquement</option>
                                        <option value="voice">Vocal uniquement</option>
                                    </select>
                                </div>
                            </div>
                            <div class="card-content">
                                <div id="xpEvolutionChartPlaceholder" class="chart-placeholder">
                                    <i class="fas fa-chart-line"></i>
                                    <p data-translate="overview.select_server_chart">Sélectionnez un serveur pour voir les graphiques</p>
                                </div>
                                <canvas id="xpEvolutionChart" width="400" height="200" style="display: none;"></canvas>
                            </div>
                        </div>

                        <!-- Moderation Stats Chart -->
                        <div class="content-card chart-card">
                            <div class="card-header">
                                <h3 class="card-title" data-translate="overview.moderation_stats">Moderation Statistics</h3>
                                <div class="card-actions">
                                    <select class="chart-period-select" id="moderationPeriod">
                                        <option value="7d" data-translate="overview.last_7_days">Last 7 days</option>
                                        <option value="30d" data-translate="overview.last_30_days">Last 30 days</option>
                                        <option value="90d" data-translate="overview.last_90_days">Last 90 days</option>
                                    </select>
                                </div>
                            </div>
                            <div class="card-content">
                                <div id="moderationChartPlaceholder" class="chart-placeholder">
                                    <i class="fas fa-server"></i>
                                    <p data-translate="overview.select_server_chart">Sélectionnez un serveur pour voir les graphiques</p>
                                </div>
                                <canvas id="moderationChart" width="400" height="200" style="display: none;"></canvas>
                            </div>
                        </div>
                    </div>

                    <!-- Top Users Card -->
                    <div class="content-card">
                        <div class="card-header">
                            <h3 class="card-title" data-translate="overview.top_members">Top Members</h3>
                            <div class="card-actions">
                                <button class="action-btn-small">
                                    <i class="fas fa-download"></i>
                                    Export
                                </button>
                            </div>
                        </div>
                        <div class="card-content">
                            <div class="table-container">
                                <table class="modern-table">
                                    <thead>
                                        <tr>
                                            <th data-translate="overview.rank">Rank</th>
                                            <th data-translate="common.user">Member</th>
                                            <th data-translate="overview.level">Level</th>
                                            <th data-translate="overview.total_xp_column">Experience</th>
                                        </tr>
                                    </thead>
                                    <tbody id="topUsersTable">
                                        <tr>
                                            <td colspan="4" class="no-data" data-translate="dashboard.select_server_data">Select a server to view data</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- XP Settings Tab -->
                <div class="tab-pane fade" id="xp-settings">
                    <div class="content-card">
                        <div class="card-header">
                            <h3 class="card-title">
                                <i class="fas fa-trophy me-2"></i>
                                <span data-translate="xp_system.title">Configuration du Système XP</span>
                            </h3>
                            <div class="card-actions">
                                <button class="action-btn-small" type="button" id="resetXPBtn" style="background: #dc3545; border-color: #dc3545;">
                                    <i class="fas fa-trash-alt"></i>
                                    <span data-translate="xp_system.reset_xp">Reset All XP</span>
                                </button>
                            </div>
                        </div>
                        <div class="card-content">
                            <form id="xpSettingsForm">
                                <div class="settings-grid">
                                    <!-- General Settings -->
                                    <div class="settings-section">
                                        <h4 class="section-title">
                                            <span data-translate="xp_system.general_settings">Paramètres Généraux</span>
                                        </h4>
                                        
                                        <div class="form-group">
                                            <div class="toggle-switch">
                                                <input type="checkbox" id="xpEnabled" class="toggle-input" checked>
                                                <label for="xpEnabled" class="toggle-label">
                                                    <span class="toggle-text" data-translate="xp_system.enable_xp">Enable XP System</span>
                                                </label>
                                            </div>
                                        </div>

                                        <div class="form-group">
                                            <label class="form-label" data-translate="xp_system.xp_channel">XP Channel</label>
                                            <select id="xpChannel" class="form-select">
                                                <option value="" data-translate="xp_system.all_channels">All channels</option>
                                            </select>
                                            <div class="form-hint" data-translate="xp_system.xp_channel_description">Channel where XP can be earned (leave blank for all)</div>
                                        </div>
                                    </div>

                                    <!-- Level Up Settings -->
                                    <div class="settings-section">
                                        <h4 class="section-title">
                                            <span data-translate="xp_system.level_up_settings">Paramètres de Montée de Niveau</span>
                                        </h4>
                                        
                                        <div class="form-group">
                                            <div class="toggle-switch">
                                                <input type="checkbox" id="levelUpMessage" class="toggle-input" checked>
                                                <label for="levelUpMessage" class="toggle-label">
                                                    <span class="toggle-text" data-translate="xp_system.level_up_messages">Show Level Up Messages</span>
                                                </label>
                                            </div>
                                        </div>

                                        <div class="form-group">
                                            <label class="form-label" data-translate="xp_system.level_up_channel">Level Up Channel</label>
                                            <select id="levelUpChannel" class="form-select">
                                                <option value="" data-translate="xp_system.same_channel">Same as message channel</option>
                                            </select>
                                            <div class="form-hint" data-translate="xp_system.level_up_channel_description">Channel for level up announcements</div>
                                        </div>

                                        <div class="form-group">
                                            <button type="button" class="btn-secondary" id="testLevelUpBtn">
                                                <i class="fas fa-paper-plane"></i>
                                                <span data-translate="xp_system.test_level_up">Test Level Up Message</span>
                                            </button>
                                        </div>
                                    </div>

                                    <!-- Level Up Message Customization -->
                                    <div class="settings-section">
                                        <h4 class="section-title">
                                            <i class="fas fa-edit me-2"></i>
                                            <span data-translate="xp_system.customize_level_up">Customize Level Up Message</span>
                                        </h4>
                                        
                                        <div class="form-group">
                                            <label class="form-label" data-translate="xp_system.message_type">Message Type</label>
                                            <select id="levelUpMessageType" class="form-select">
                                                <option value="simple" data-translate="xp_system.simple_message">Simple Text Message</option>
                                                <option value="embed" selected data-translate="xp_system.embed_message">Embed Message</option>
                                            </select>
                                            <div class="form-hint" data-translate="xp_system.message_type_hint">Choose between a simple text message or a rich embed</div>
                                        </div>

                                        <!-- Simple Message Content -->
                                        <div class="form-group" id="simpleMessageGroup">
                                            <label class="form-label" data-translate="xp_system.simple_message_content">Simple Message</label>
                                            <textarea id="levelUpSimpleMessage" class="form-control" rows="2" placeholder="Congratulations {user}! You have reached level {level}!"></textarea>
                                            <div class="form-hint" data-translate="xp_system.simple_message_hint">Variables: {user} = mention, {level} = level number</div>
                                        </div>

                                        <!-- Embed Configuration -->
                                        <div id="embedConfigGroup">
                                            <div class="form-group">
                                                <label class="form-label" data-translate="xp_system.embed_title">Embed Title</label>
                                                <input type="text" id="levelUpEmbedTitle" class="form-control" placeholder="Level Up!">
                                            </div>

                                            <div class="form-group">
                                                <label class="form-label" data-translate="xp_system.embed_description">Embed Description</label>
                                                <textarea id="levelUpEmbedDescription" class="form-control" rows="3" placeholder="{user} has reached level **{level}**!"></textarea>
                                                <div class="form-hint" data-translate="xp_system.embed_description_hint">Variables: {user} = mention, {level} = level number. Supports markdown.</div>
                                            </div>

                                            <div class="form-group">
                                                <label class="form-label" data-translate="xp_system.embed_color">Embed Color</label>
                                                <input type="color" id="levelUpEmbedColor" class="form-control form-control-color" value="#FFD700">
                                                <div class="form-hint" data-translate="xp_system.embed_color_hint">Color of the embed border</div>
                                            </div>

                                            <div class="form-group">
                                                <label class="form-label" data-translate="xp_system.embed_thumbnail">Thumbnail URL</label>
                                                <input type="url" id="levelUpEmbedThumbnail" class="form-control" placeholder="https://example.com/thumbnail.png">
                                                <div class="form-hint" data-translate="xp_system.embed_thumbnail_hint">Small image displayed in the top-right corner</div>
                                            </div>

                                            <div class="form-group">
                                                <div class="toggle-switch">
                                                    <input type="checkbox" id="levelUpShowUserAvatar" class="toggle-input" checked>
                                                    <label for="levelUpShowUserAvatar" class="toggle-label">
                                                        <span class="toggle-text" data-translate="xp_system.show_user_avatar">Show User Profile Picture</span>
                                                    </label>
                                                </div>
                                                <div class="form-hint" data-translate="xp_system.show_user_avatar_hint">Display the user's avatar as thumbnail when no custom thumbnail URL is set</div>
                                            </div>

                                            <div class="form-group">
                                                <label class="form-label" data-translate="xp_system.embed_image">Image URL</label>
                                                <input type="url" id="levelUpEmbedImage" class="form-control" placeholder="https://example.com/image.png">
                                                <div class="form-hint" data-translate="xp_system.embed_image_hint">Large image displayed at the bottom of the embed</div>
                                            </div>

                                            <div class="form-group">
                                                <label class="form-label" data-translate="xp_system.embed_footer">Footer Text</label>
                                                <input type="text" id="levelUpEmbedFooter" class="form-control" placeholder="Keep up the great work!">
                                            </div>

                                            <div class="form-group">
                                                <div class="toggle-switch">
                                                    <input type="checkbox" id="levelUpEmbedTimestamp" class="toggle-input" checked>
                                                    <label for="levelUpEmbedTimestamp" class="toggle-label">
                                                        <span class="toggle-text" data-translate="xp_system.embed_timestamp">Show Timestamp</span>
                                                    </label>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <!-- Level Roles Settings -->
                                    <div class="settings-section">
                                        <h4 class="section-title">
                                            <i class="fas fa-medal me-2"></i>
                                            <span data-translate="xp_system.level_roles_title">Level Roles</span>
                                        </h4>
                                        <div class="form-hint mb-3" data-translate="xp_system.level_roles_description">Configure roles that are automatically assigned when users reach specific levels. Users will only receive the HIGHEST level role they qualify for. Use the sync button to update all existing users retroactively.</div>
                                        
                                        <div id="levelRolesList" class="level-roles-list">
                                            <!-- Level roles will be populated here -->
                                        </div>

                                        <div class="form-group">
                                            <button type="button" class="btn-secondary" id="addLevelRoleBtn">
                                                <i class="fas fa-plus"></i>
                                                <span data-translate="xp_system.add_level_role">Add Level Role</span>
                                            </button>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="form-actions">
                                    <button type="submit" class="btn-primary">
                                        <i class="fas fa-save me-2"></i>
                                        <span data-translate="xp_system.save_xp_settings">Save XP Settings</span>
                                    </button>
                                    <button type="button" class="btn-secondary">
                                        <i class="fas fa-undo me-2"></i>
                                        <span data-translate="common.reset_defaults">Reset to Defaults</span>
                                    </button>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>

                <!-- Moderation Tab -->
                <div class="tab-pane fade" id="moderation">
                    <div class="content-card">
                        <div class="card-header">
                            <h3 class="card-title" data-translate="moderation.title">
                                <i class="fas fa-shield-alt me-2"></i>
                                Moderation Tools
                            </h3>
                        </div>
                        <div class="card-content">
                            <div class="settings-grid">
                                <!-- Moderation Actions -->
                                <div class="settings-section">
                                    <h4 class="section-title">
                                        <span data-translate="moderation.execute_action">Exécuter une Action</span>
                                    </h4>
                                    
                                    <div class="form-group">
                                        <label class="form-label">
                                            <span data-translate="moderation.select_member">Sélectionner un Membre</span>
                                        </label>
                                        <select id="memberSelect" class="form-select">
                                            <option value="" data-translate="moderation.choose_member">Choisir un membre...</option>
                                        </select>
                                    </div>

                                    <div class="form-group">
                                        <label class="form-label" data-translate="moderation.action">Action</label>
                                        <select id="moderationAction" class="form-select">
                                            <option value="" data-translate="moderation.select_action">Sélectionner une action...</option>
                                            <option value="warn" data-translate="moderation.warn">Avertir</option>
                                            <option value="timeout" data-translate="moderation.timeout">Timeout</option>
                                            <option value="kick" data-translate="moderation.kick">Expulser</option>
                                            <option value="ban" data-translate="moderation.ban">Bannir</option>
                                        </select>
                                    </div>

                                    <div class="form-group" id="timeoutDuration" style="display: none;">
                                        <label class="form-label">
                                            <span data-translate="moderation.timeout_duration">Durée du Timeout (minutes)</span>
                                        </label>
                                        <input type="number" id="timeoutMinutes" class="form-input" min="1" max="10080" value="60">
                                    </div>

                                    <div class="form-group">
                                        <label class="form-label">
                                            <span data-translate="moderation.reason">Raison</span>
                                        </label>
                                        <textarea id="moderationReason" class="form-textarea" rows="3" data-translate="moderation.reason_placeholder" placeholder="Entrez la raison de cette action..."></textarea>
                                    </div>

                                    <div class="form-group">
                                        <label class="form-label">
                                            <span data-translate="moderation.notification_channel">Canal de Notification</span>
                                        </label>
                                        <select id="moderationChannel" class="form-select">
                                            <option value="" data-translate="moderation.no_notification">Aucune notification</option>
                                        </select>
                                        <div class="form-hint" data-translate="moderation.notification_channel_description">Canal pour enregistrer cette action</div>
                                    </div>

                                    <div class="form-actions">
                                        <button type="button" class="btn-danger" id="executeModerationBtn">
                                            <i class="fas fa-gavel me-2"></i>
                                            <span data-translate="moderation.execute_action">Exécuter l'Action</span>
                                        </button>
                                    </div>
                                </div>

                                <!-- Moderation History -->
                                <div class="settings-section">
                                    <div class="section-header">
                                        <h4 class="section-title" data-translate="moderation.history.title">Moderation History</h4>
                                        <div class="history-controls">
                                            <button type="button" class="btn-outline btn-sm" id="refreshHistoryBtn">
                                                <i class="fas fa-sync-alt"></i>
                                                <span data-translate="common.refresh">Actualiser</span>
                                            </button>
                                            <button type="button" class="btn-outline btn-sm" id="exportHistoryBtn">
                                                <i class="fas fa-download"></i>
                                                <span data-translate="moderation.export_history">Exporter</span>
                                            </button>
                                        </div>
                                    </div>
                                    
                                    <!-- Filters -->
                                    <div class="history-filters">
                                        <div class="filter-row">
                                            <div class="filter-group">
                                                <label class="filter-label" data-translate="moderation.filter_user">Filter by User</label>
                                                <input type="text" id="historyUserFilter" class="form-input" placeholder="Username or ID" data-translate="moderation.filter_user_placeholder">
                                            </div>
                                            <div class="filter-group">
                                                <label class="filter-label" data-translate="moderation.filter_action">Filter by Action</label>
                                                <select id="historyActionFilter" class="form-select">
                                                    <option value="" data-translate="moderation.all_actions">All Actions</option>
                                                    <option value="warn" data-translate="moderation.actions.warn">Warn</option>
                                                    <option value="timeout" data-translate="moderation.actions.timeout">Timeout</option>
                                                    <option value="kick" data-translate="moderation.actions.kick">Kick</option>
                                                    <option value="ban" data-translate="moderation.actions.ban">Ban</option>
                                                    <option value="unban" data-translate="moderation.actions.unban">Unban</option>
                                                    <option value="unmute" data-translate="moderation.actions.unmute">Unmute</option>
                                                </select>
                                            </div>
                                            <div class="filter-group">
                                                <label class="filter-label" data-translate="moderation.filter_date">Filter by Date</label>
                                                <select id="historyDateFilter" class="form-select">
                                                    <option value="" data-translate="moderation.all_time">All Time</option>
                                                    <option value="today" data-translate="moderation.today">Today</option>
                                                    <option value="week" data-translate="moderation.this_week">This Week</option>
                                                    <option value="month" data-translate="moderation.this_month">This Month</option>
                                                </select>
                                            </div>
                                            <div class="filter-group">
                                                <label class="filter-label" data-translate="moderation.limit">Limit</label>
                                                <select id="historyLimitFilter" class="form-select">
                                                    <option value="10">10</option>
                                                    <option value="25" selected>25</option>
                                                    <option value="50">50</option>
                                                    <option value="100">100</option>
                                                </select>
                                            </div>
                                        </div>
                                        <div class="filter-actions">
                                            <button type="button" class="btn-primary" id="applyHistoryFiltersBtn">
                                                <i class="fas fa-filter"></i>
                                                <span data-translate="moderation.apply_filters">Apply Filters</span>
                                            </button>
                                            <button type="button" class="btn-outline" id="clearHistoryFiltersBtn">
                                                <i class="fas fa-times"></i>
                                                <span data-translate="moderation.clear_filters">Clear Filters</span>
                                            </button>
                                        </div>
                                    </div>
                                    
                                    <!-- Statistics -->
                                    <div class="history-stats" id="moderationStats">
                                        <div class="stats-grid">
                                            <div class="stat-item">
                                                <div class="stat-value" id="totalActions">0</div>
                                                <div class="stat-label" data-translate="moderation.total_actions">Total Actions</div>
                                            </div>
                                            <div class="stat-item">
                                                <div class="stat-value" id="uniqueUsers">0</div>
                                                <div class="stat-label" data-translate="moderation.unique_users">Unique Users</div>
                                            </div>
                                            <div class="stat-item">
                                                <div class="stat-value" id="activeModerators">0</div>
                                                <div class="stat-label" data-translate="moderation.active_moderators">Active Moderators</div>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <!-- History Table -->
                                    <div class="table-container">
                                        <table class="modern-table">
                                            <thead>
                                                <tr>
                                                    <th data-translate="moderation.history.user">User</th>
                                                    <th data-translate="moderation.history.action">Action</th>
                                                    <th data-translate="moderation.history.moderator">Moderator</th>
                                                    <th data-translate="moderation.history.reason">Reason</th>
                                                    <th data-translate="moderation.history.date">Date</th>
                                                    <th data-translate="moderation.history.duration">Duration</th>
                                                </tr>
                                            </thead>
                                            <tbody id="moderationHistoryTable">
                                                <tr>
                                                    <td colspan="6" class="no-data" data-translate="moderation.loading_history">Loading moderation history...</td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                    
                                    <!-- Pagination -->
                                    <div class="pagination-container" id="moderationPagination" style="display: none;">
                                        <button type="button" class="btn-outline" id="prevPageBtn" disabled>
                                            <i class="fas fa-chevron-left"></i>
                                            <span data-translate="common.previous">Previous</span>
                                        </button>
                                        <span class="pagination-info" id="paginationInfo">Page 1 of 1</span>
                                        <button type="button" class="btn-outline" id="nextPageBtn" disabled>
                                            <span data-translate="common.next">Next</span>
                                            <i class="fas fa-chevron-right"></i>
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Welcome System Tab -->
                <div class="tab-pane fade" id="welcome">
                    <div class="content-card">
                        <div class="card-header">
                            <h3 class="card-title">
                                <i class="fas fa-door-open me-2"></i>
                                Welcome System Configuration
                            </h3>
                        </div>
                        <div class="card-content">
                            <form id="welcomeSettingsForm">
                                <div class="settings-grid">
                                    <!-- Welcome Settings -->
                                    <div class="settings-section">
                                        <h4 class="section-title">Welcome Messages</h4>
                                        
                                        <div class="form-group">
                                            <div class="toggle-switch">
                                                <input type="checkbox" id="welcomeEnabled" class="toggle-input">
                                                <label for="welcomeEnabled" class="toggle-label">
                                                    <span class="toggle-text">Enable Welcome Messages</span>
                                                </label>
                                            </div>
                                        </div>

                                        <div class="form-group">
                                            <label class="form-label">Welcome Channel</label>
                                            <select id="welcomeChannel" class="form-select">
                                                <option value="">Select a channel...</option>
                                            </select>
                                            <div class="form-hint">Channel where welcome messages will be sent</div>
                                        </div>

                                        <div class="form-group">
                                            <label class="form-label">Welcome Title</label>
                                            <input type="text" id="welcomeTitle" class="form-control" placeholder="👋 New member!" maxlength="256">
                                            <div class="form-hint">Title displayed at the top of the welcome embed (max 256 characters)</div>
                                        </div>

                                        <div class="form-group">
                                            <label class="form-label">Welcome Message</label>
                                            <textarea id="welcomeMessage" class="form-textarea" rows="4" placeholder="Welcome {user} to {server}!" data-translate="welcome_system.welcome_message_placeholder"></textarea>
                                            <div class="form-hint">
                                                <strong>Available placeholders:</strong><br>
                                                <code>{user}</code> - Member mention (@User) • 
                                                <code>{server}</code> - Server name • 
                                                <code>{username}</code> - Username<br>
                                                <code>{displayname}</code> - Display name • 
                                                <code>{memberCount}</code> - Current member count
                                            </div>
                                        </div>

                                        <div class="form-group">
                                            <label class="form-label">Welcome Image URL</label>
                                            <input type="url" id="welcomeImageUrl" class="form-control" placeholder="https://example.com/image.png">
                                            <div class="form-hint">Optional image to display in the welcome embed (must be a valid URL)</div>
                                        </div>

                                        <div class="form-group">
                                            <div class="toggle-switch">
                                                <input type="checkbox" id="welcomeFields" class="toggle-input">
                                                <label for="welcomeFields" class="toggle-label">
                                                    <span class="toggle-text">Add Custom Fields</span>
                                                </label>
                                            </div>
                                            <div class="form-hint">Add custom fields to the welcome embed</div>
                                        </div>

                                        <div id="welcomeFieldsContainer" style="display: none;">
                                            <div class="form-group">
                                                <label class="form-label">Custom Fields</label>
                                                <div id="welcomeFieldsList">
                                                    <!-- Dynamic fields will be added here -->
                                                </div>
                                                <button type="button" class="add-field-btn" id="addWelcomeField">
                                                    <i class="fas fa-plus me-2"></i>Add Field
                                                </button>
                                                <div class="form-hint">
                                                    <strong>Available placeholders:</strong> {user}, {server}, {username}, {displayname}, {memberCount}
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <!-- Goodbye Settings -->
                                    <div class="settings-section">
                                        <h4 class="section-title">Goodbye Messages</h4>
                                        
                                        <div class="form-group">
                                            <div class="toggle-switch">
                                                <input type="checkbox" id="goodbyeEnabled" class="toggle-input">
                                                <label for="goodbyeEnabled" class="toggle-label">
                                                    <span class="toggle-text">Enable Goodbye Messages</span>
                                                </label>
                                            </div>
                                        </div>

                                        <div class="form-group">
                                            <label class="form-label">Goodbye Channel</label>
                                            <select id="goodbyeChannel" class="form-select">
                                                <option value="">Select a channel...</option>
                                            </select>
                                            <div class="form-hint">Channel where goodbye messages will be sent</div>
                                        </div>

                                        <div class="form-group">
                                            <label class="form-label">Goodbye Title</label>
                                            <input type="text" id="goodbyeTitle" class="form-control" placeholder="👋 Departure" maxlength="256">
                                            <div class="form-hint">Title displayed at the top of the goodbye embed (max 256 characters)</div>
                                        </div>

                                        <div class="form-group">
                                            <label class="form-label">Goodbye Message</label>
                                            <textarea id="goodbyeMessage" class="form-textarea" rows="4" placeholder="Goodbye {user}, thanks for being part of {server}!" data-translate="welcome_system.goodbye_message_placeholder"></textarea>
                                            <div class="form-hint">
                                                <strong>Available placeholders:</strong><br>
                                                <code>{user}</code> - Member mention (@User) • 
                                                <code>{server}</code> - Server name • 
                                                <code>{username}</code> - Username<br>
                                                <code>{displayname}</code> - Display name • 
                                                <code>{memberCount}</code> - Current member count
                                            </div>
                                        </div>

                                        <div class="form-group">
                                            <label class="form-label">Goodbye Image URL</label>
                                            <input type="url" id="goodbyeImageUrl" class="form-control" placeholder="https://example.com/image.png">
                                            <div class="form-hint">Optional image to display in the goodbye embed (must be a valid URL)</div>
                                        </div>

                                        <div class="form-group">
                                            <div class="toggle-switch">
                                                <input type="checkbox" id="goodbyeFields" class="toggle-input">
                                                <label for="goodbyeFields" class="toggle-label">
                                                    <span class="toggle-text">Add Custom Fields</span>
                                                </label>
                                            </div>
                                            <div class="form-hint">Add custom fields to the goodbye embed</div>
                                        </div>

                                        <div id="goodbyeFieldsContainer" style="display: none;">
                                            <div class="form-group">
                                                <label class="form-label">Custom Fields</label>
                                                <div id="goodbyeFieldsList">
                                                    <!-- Dynamic fields will be added here -->
                                                </div>
                                                <button type="button" class="add-field-btn" id="addGoodbyeField">
                                                    <i class="fas fa-plus me-2"></i>Add Field
                                                </button>
                                                <div class="form-hint">
                                                    <strong>Available placeholders:</strong> {user}, {server}, {username}, {displayname}, {memberCount}
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <!-- Auto-Role Settings -->
                                    <div class="settings-section">
                                        <h4 class="section-title">Auto-Role Assignment</h4>
                                        
                                        <div class="form-group">
                                            <div class="toggle-switch">
                                                <input type="checkbox" id="autoRoleEnabled" class="toggle-input">
                                                <label for="autoRoleEnabled" class="toggle-label">
                                                    <span class="toggle-text">Enable Auto-Role Assignment</span>
                                                </label>
                                            </div>
                                            <div class="form-hint">Automatically assign roles to new members when they join</div>
                                        </div>

                                        <div class="form-group" id="autoRoleContainer" style="display: none;">
                                            <label class="form-label">Roles to Assign</label>
                                            <div class="multi-select-container">
                                                <div class="selected-roles" id="selectedRoles">
                                                    <!-- Selected roles will appear here -->
                                                </div>
                                                <select id="roleSelect" class="form-select" multiple>
                                                    <option value="">Select roles...</option>
                                                </select>
                                            </div>
                                            <div class="form-hint">
                                                <i class="fas fa-info-circle me-1"></i>
                                                Selected roles will be automatically assigned to new members. 
                                                The bot must have permission to assign these roles and they must be below the bot's highest role.
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="form-actions">
                                    <button type="submit" class="btn-primary">
                                        <i class="fas fa-save me-2"></i>
                                        Save Welcome Settings
                                    </button>
                                    <button type="button" class="btn-secondary" id="testWelcomeBtn">
                                        <i class="fas fa-paper-plane me-2"></i>
                                        Test Welcome Message
                                    </button>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>

                <!-- Role Menus Tab -->
                <div class="tab-pane fade" id="role-menus">
                    <div class="content-card">
                        <div class="card-header">
                            <h3 class="card-title">
                                <i class="fas fa-list me-2"></i>
                                Role Menu Management
                            </h3>
                            <div class="card-actions">
                                <button class="action-btn-small" type="button" id="refreshRoleMenusBtn">
                                    <i class="fas fa-sync-alt"></i>
                                    <span data-translate="common.refresh">Actualiser</span>
                                </button>
                                <button class="action-btn-small" type="button" id="createRoleMenuBtn">
                                    <span>Create Menu</span>
                                </button>
                            </div>
                        </div>
                        <div class="card-content">
                            <!-- Role Menus List -->
                            <div class="role-menus-container">
                                <div class="role-menus-list" id="roleMenusList">
                                    <!-- Role menus will be loaded here dynamically -->
                                </div>
                                <div class="empty-state" id="roleMenusEmpty">
                                    <i class="fas fa-list-ul fa-3x"></i>
                                    <h3>No Role Menus Found</h3>
                                    <p>Create your first role menu to get started!</p>
                                    <button class="btn-primary" onclick="document.getElementById('createRoleMenuBtn').click()">
                                        Create Role Menu
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Server Logs Tab -->
                <div class="tab-pane fade" id="logs">
                    <div class="content-card">
                        <div class="card-header">
                            <h3 class="card-title">
                                <i class="fas fa-file-alt me-2"></i>
                                Server Logs Configuration
                            </h3>
                        </div>
                        <div class="card-content">
                            <form id="logsSettingsForm">
                                <div class="settings-grid">
                                    <!-- General Log Settings -->
                                    <div class="settings-section">
                                        <h4 class="section-title">
                                            <span data-translate="server_logs.general_settings">Paramètres Généraux</span>
                                        </h4>
                                        
                                        <div class="form-group">
                                            <div class="toggle-switch">
                                                <input type="checkbox" id="serverLogsEnabled" class="toggle-input">
                                                <label for="serverLogsEnabled" class="toggle-label">
                                                    <span class="toggle-text">Enable Server Logs</span>
                                                </label>
                                            </div>
                                        </div>

                                        <div class="form-group">
                                            <label class="form-label">Logs Channel</label>
                                            <select id="serverLogsChannel" class="form-select">
                                                <option value="">Select a channel...</option>
                                            </select>
                                            <div class="form-hint">Channel where server logs will be sent</div>
                                        </div>
                                    </div>

                                    <!-- Log Event Types -->
                                    <div class="settings-section">
                                        <h4 class="section-title">Log Events</h4>
                                        
                                        <div class="toggle-grid">
                                            <div class="form-group">
                                                <div class="toggle-switch">
                                                    <input type="checkbox" id="logMessageDelete" class="toggle-input">
                                                    <label for="logMessageDelete" class="toggle-label">
                                                        <span class="toggle-text">
                                                            <i class="fas fa-trash-alt"></i>
                                                            Message Deletions
                                                        </span>
                                                    </label>
                                                </div>
                                            </div>

                                            <div class="form-group">
                                                <div class="toggle-switch">
                                                    <input type="checkbox" id="logMessageEdit" class="toggle-input">
                                                    <label for="logMessageEdit" class="toggle-label">
                                                        <span class="toggle-text">
                                                            <i class="fas fa-edit"></i>
                                                            Message Edits
                                                        </span>
                                                    </label>
                                                </div>
                                            </div>

                                            <div class="form-group">
                                                <div class="toggle-switch">
                                                    <input type="checkbox" id="logMemberJoin" class="toggle-input">
                                                    <label for="logMemberJoin" class="toggle-label">
                                                        <span class="toggle-text">
                                                            <i class="fas fa-user-plus"></i>
                                                            Member Joins
                                                        </span>
                                                    </label>
                                                </div>
                                            </div>

                                            <div class="form-group">
                                                <div class="toggle-switch">
                                                    <input type="checkbox" id="logMemberLeave" class="toggle-input">
                                                    <label for="logMemberLeave" class="toggle-label">
                                                        <span class="toggle-text">
                                                            <i class="fas fa-user-minus"></i>
                                                            Member Leaves
                                                        </span>
                                                    </label>
                                                </div>
                                            </div>

                                            <div class="form-group">
                                                <div class="toggle-switch">
                                                    <input type="checkbox" id="logMemberUpdate" class="toggle-input">
                                                    <label for="logMemberUpdate" class="toggle-label">
                                                        <span class="toggle-text">
                                                            <i class="fas fa-user-edit"></i>
                                                            Member Updates
                                                        </span>
                                                    </label>
                                                </div>
                                            </div>

                                            <div class="form-group">
                                                <div class="toggle-switch">
                                                    <input type="checkbox" id="logVoiceStateUpdate" class="toggle-input">
                                                    <label for="logVoiceStateUpdate" class="toggle-label">
                                                        <span class="toggle-text">
                                                            <i class="fas fa-microphone"></i>
                                                            Voice State Changes
                                                        </span>
                                                    </label>
                                                </div>
                                            </div>

                                            <div class="form-group">
                                                <div class="toggle-switch">
                                                    <input type="checkbox" id="logRoleCreate" class="toggle-input">
                                                    <label for="logRoleCreate" class="toggle-label">
                                                        <span class="toggle-text">
                                                            <i class="fas fa-plus-circle"></i>
                                                            Role Creation
                                                        </span>
                                                    </label>
                                                </div>
                                            </div>

                                            <div class="form-group">
                                                <div class="toggle-switch">
                                                    <input type="checkbox" id="logRoleDelete" class="toggle-input">
                                                    <label for="logRoleDelete" class="toggle-label">
                                                        <span class="toggle-text">
                                                            <i class="fas fa-minus-circle"></i>
                                                            Role Deletion
                                                        </span>
                                                    </label>
                                                </div>
                                            </div>

                                            <div class="form-group">
                                                <div class="toggle-switch">
                                                    <input type="checkbox" id="logRoleUpdate" class="toggle-input">
                                                    <label for="logRoleUpdate" class="toggle-label">
                                                        <span class="toggle-text">
                                                            <i class="fas fa-edit"></i>
                                                            Role Updates
                                                        </span>
                                                    </label>
                                                </div>
                                            </div>

                                            <div class="form-group">
                                                <div class="toggle-switch">
                                                    <input type="checkbox" id="logChannelCreate" class="toggle-input">
                                                    <label for="logChannelCreate" class="toggle-label">
                                                        <span class="toggle-text">
                                                            <i class="fas fa-hashtag"></i>
                                                            Channel Creation
                                                        </span>
                                                    </label>
                                                </div>
                                            </div>

                                            <div class="form-group">
                                                <div class="toggle-switch">
                                                    <input type="checkbox" id="logChannelDelete" class="toggle-input">
                                                    <label for="logChannelDelete" class="toggle-label">
                                                        <span class="toggle-text">
                                                            <i class="fas fa-hashtag"></i>
                                                        <span class="toggle-text">
                                                            <i class="fas fa-hashtag"></i>
                                                            Channel Deletion
                                                        </span>
                                                    </label>
                                                </div>
                                            </div>

                                            <div class="form-group">
                                                <div class="toggle-switch">
                                                    <input type="checkbox" id="logChannelUpdate" class="toggle-input">
                                                    <label for="logChannelUpdate" class="toggle-label">
                                                        <span class="toggle-text">
                                                            <i class="fas fa-hashtag"></i>
                                                            Channel Updates
                                                        </span>
                                                    </label>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="form-actions">
                                    <button type="submit" class="btn-primary">
                                        <i class="fas fa-save me-2"></i>
                                        Save Log Settings
                                    </button>
                                    <button type="button" class="btn-secondary" id="testLogBtn">
                                        <i class="fas fa-paper-plane me-2"></i>
                                        Test Log Message
                                    </button>
                                    <button type="button" class="btn-outline" onclick="dashboard.toggleAllLogs(true)">
                                        <i class="fas fa-check-square me-2"></i>
                                        Enable All
                                    </button>
                                    <button type="button" class="btn-outline" onclick="dashboard.toggleAllLogs(false)">
                                        <i class="fas fa-square me-2"></i>
                                        Disable All
                                    </button>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
                
                <!-- Ticket System -->
                <div class="tab-pane fade" id="tickets">
                    <div class="content-card">
                        <div class="card-header">
                            <h3 class="card-title">
                                <i class="fas fa-ticket-alt me-2"></i>
                                Ticket System Configuration
                            </h3>
                        </div>
                        <div class="card-content">
                            <!-- System Toggle -->
                            <div class="settings-section">
                                <h4 class="section-title">
                                    <span data-translate="ticket_system.general_settings">Paramètres Généraux</span>
                                </h4>
                                
                                <div class="form-group">
                                    <div class="toggle-switch">
                                        <input type="checkbox" id="ticketSystemEnabled" class="toggle-input">
                                        <label for="ticketSystemEnabled" class="toggle-label">
                                            <span class="toggle-text">Enable Ticket System</span>
                                        </label>
                                    </div>
                                </div>
                            </div>

                            <!-- Ticket Panels -->
                            <div class="settings-section" id="ticketPanelsSection" style="display: none;">
                                <div class="section-header">
                                    <h4 class="section-title">Panneaux de tickets</h4>
                                    <button type="button" class="btn-primary" onclick="dashboard.createTicketPanel()">
                                        <i class="fas fa-plus me-2"></i>
                                        Créer un panneau
                                    </button>
                                </div>
                                
                                <div class="panels-list" id="ticketPanelsList">
                                    <!-- Panels will be loaded here -->
                                </div>
                                
                                <!-- No panels message -->
                                <div class="empty-state" id="ticketPanelsEmpty" style="display: none;">
                                    <div class="empty-icon">
                                        <i class="fas fa-ticket-alt"></i>
                                    </div>
                                    <h4>Aucun panneau de ticket</h4>
                                    <p>Créez votre premier panneau de ticket pour commencer</p>
                                    <button type="button" class="btn-primary" onclick="dashboard.createTicketPanel()">
                                        <i class="fas fa-plus me-2"></i>
                                        Créer le premier panneau
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Ticket Logs Configuration -->
                <div class="tab-pane fade" id="ticket-logs">
                    <div class="content-card">
                        <div class="card-header">
                            <h3 class="card-title">
                                <i class="fas fa-history me-2"></i>
                                Logs de Tickets
                            </h3>
                            <p class="card-subtitle">Recherchez et visualisez l'historique des tickets</p>
                        </div>
                        <div class="card-content">
                            <!-- Ticket Search Section -->
                            <div class="settings-section">
                                <h4 class="section-title">
                                    <i class="fas fa-search me-2"></i>
                                    Rechercher des Tickets
                                </h4>
                                
                                <div class="form-group">
                                    <label class="form-label">Rechercher par utilisateur</label>
                                    <div class="search-input-group">
                                        <div class="autocomplete-wrapper">
                                            <input type="text" id="ticketSearchInput" class="form-control" placeholder="Nom d'utilisateur ou ID..." autocomplete="off">
                                            <div id="searchSuggestions" class="search-suggestions" style="display: none;">
                                                <!-- Suggestions will appear here -->
                                            </div>
                                        </div>
                                        <button type="button" class="btn-primary" onclick="searchTicketLogs()">
                                            <i class="fas fa-search me-2"></i>
                                            Rechercher
                                        </button>
                                    </div>
                                </div>
                                
                                <!-- Search Results -->
                                <div id="ticketSearchResults" class="ticket-search-results" style="display: none;">
                                    <div class="results-header">
                                        <h5 class="results-title">Résultats de la recherche</h5>
                                        <span class="results-count" id="ticketResultsCount">0 tickets trouvés</span>
                                    </div>
                                    <div class="tickets-list" id="ticketsList">
                                        <!-- Results will be populated here -->
                                    </div>
                                </div>
                                
                                <div id="ticketSearchEmpty" class="empty-state" style="display: none;">
                                    <div class="empty-icon">
                                        <i class="fas fa-search"></i>
                                    </div>
                                    <h4>Aucun ticket trouvé</h4>
                                    <p>Essayez avec un autre nom d'utilisateur ou ID</p>
                                </div>
                            </div>
                            
                            <hr class="section-divider">
                            
                            <!-- Recent Tickets Section -->
                            <div class="settings-section">
                                <h4 class="section-title">
                                    <i class="fas fa-clock me-2"></i>
                                    Tickets Récents
                                </h4>
                                <p class="form-hint mb-3">
                                    <i class="fas fa-info-circle me-1"></i>
                                    Les 5 derniers tickets enregistrés sur Google Drive
                                </p>
                                
                                <div id="recentTicketsLoading" class="loading-state" style="display: none;">
                                    <div class="spinner"></div>
                                    <p>Chargement des tickets récents...</p>
                                </div>
                                
                                <div id="recentTicketsList" class="tickets-list">
                                    <!-- Recent tickets will be populated here -->
                                </div>
                                
                                <div id="recentTicketsEmpty" class="empty-state" style="display: none;">
                                    <div class="empty-icon">
                                        <i class="fas fa-inbox"></i>
                                    </div>
                                    <h4>Aucun ticket récent</h4>
                                    <p>Les tickets apparaîtront ici une fois qu'ils seront créés</p>
                                </div>
                            </div>
                            
                            <hr class="section-divider">
                            
                            <!-- Configuration Section -->
                            <div class="settings-section">
                                <h4 class="section-title">
                                    <i class="fas fa-cog me-2"></i>
                                    Configuration des Logs
                                </h4>
                            </div>
                            
                            <form id="ticketLogsConfigForm">
                                <div class="settings-section">
                                    <h4 class="section-title">
                                        <i class="fas fa-bell me-2"></i>
                                        Canal de Logs d'Événements
                                    </h4>
                                    
                                    <div class="form-group">
                                        <label class="form-label">
                                            Canal de Logs d'Événements
                                            <span class="form-hint-inline">(optionnel)</span>
                                        </label>
                                        <select id="ticketEventsLogChannel" class="form-select">
                                            <option value="">-- Désactivé --</option>
                                        </select>
                                        <div class="form-hint">
                                            <i class="fas fa-info-circle me-1"></i>
                                            Les événements suivants seront enregistrés dans ce canal :
                                            <ul class="event-list">
                                                <li><span class="event-badge green">🎫 Création</span> - Quand un ticket est créé</li>
                                                <li><span class="event-badge blue">🙋 Prise en charge</span> - Quand quelqu'un prend en charge un ticket de vérification</li>
                                                <li><span class="event-badge orange">🔒 Fermeture</span> - Quand un ticket est fermé</li>
                                                <li><span class="event-badge red">🗑️ Suppression</span> - Quand un ticket est supprimé définitivement</li>
                                                <li><span class="event-badge purple">🔓 Réouverture</span> - Quand un ticket est rouvert</li>
                                                <li><span class="event-badge gold">✅ Vérification</span> - Quand un membre est vérifié via le ticket</li>
                                            </ul>
                                        </div>
                                    </div>

                                    <div class="form-group">
                                        <label class="form-label">
                                            Canal de Logs de Transcripts
                                            <span class="form-hint-inline">(existant)</span>
                                        </label>
                                        <select id="ticketLogsChannel" class="form-select">
                                            <option value="">-- Non configuré --</option>
                                        </select>
                                        <div class="form-hint">
                                            <i class="fas fa-info-circle me-1"></i>
                                            Canal où les transcripts complets des tickets seront envoyés après fermeture
                                        </div>
                                    </div>
                                </div>

                                <div class="form-actions">
                                    <button type="submit" class="btn-primary">
                                        <i class="fas fa-save me-2"></i>
                                        Sauvegarder la Configuration
                                    </button>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
                
                <!-- Embed Creator System -->
                <div class="tab-pane fade" id="embed">
                    <div class="content-card">
                        <div class="card-header">
                            <h3 class="card-title">
                                <i class="fas fa-code me-2"></i>
                                Créateur d'Embed
                            </h3>
                            <p class="card-subtitle">Créez et envoyez des messages embed personnalisés dans n'importe quel salon</p>
                        </div>
                        <div class="card-content">
                            <form id="embedCreatorForm">
                                <div class="settings-grid">
                                    <!-- Target Settings -->
                                    <div class="settings-section">
                                        <h4 class="section-title">Paramètres de Destination</h4>
                                        
                                        <div class="form-group">
                                            <label class="form-label">Salon de Destination <span class="required">*</span></label>
                                            <select id="embedTargetChannel" class="form-select" required>
                                                <option value="">Sélectionnez un salon...</option>
                                            </select>
                                            <div class="form-hint">Salon dans lequel l'embed sera envoyé</div>
                                        </div>

                                        <div class="form-group">
                                            <label class="form-label">Paramètres de Mention</label>
                                            <div class="ping-options">
                                                <div class="form-group">
                                                    <div class="toggle-switch">
                                                        <input type="checkbox" id="embedPingRole" class="toggle-input">
                                                        <label for="embedPingRole" class="toggle-label">
                                                            <span class="toggle-text">Mentionner un Rôle</span>
                                                        </label>
                                                    </div>
                                                </div>
                                                
                                                <div class="form-group" id="embedRoleSelector" style="display: none;">
                                                    <select id="embedPingRoleSelect" class="form-select">
                                                        <option value="">Sélectionnez un rôle...</option>
                                                    </select>
                                                </div>

                                                <div class="form-group">
                                                    <div class="toggle-switch">
                                                        <input type="checkbox" id="embedPingUser" class="toggle-input">
                                                        <label for="embedPingUser" class="toggle-label">
                                                            <span class="toggle-text">Mentionner un Utilisateur</span>
                                                        </label>
                                                    </div>
                                                </div>
                                                
                                                <div class="form-group" id="embedUserSelector" style="display: none;">
                                                    <select id="embedPingUserSelect" class="form-select">
                                                        <option value="">Sélectionnez un membre...</option>
                                                    </select>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <!-- Embed Content -->
                                    <div class="settings-section">
                                        <h4 class="section-title">Contenu de l'Embed</h4>
                                        
                                        <div class="form-group">
                                            <label class="form-label">Titre</label>
                                            <input type="text" id="embedTitle" class="form-control" placeholder="Titre de l'embed..." maxlength="256" data-translate="embed_system.title_placeholder">
                                            <div class="form-hint">Maximum 256 caractères</div>
                                        </div>

                                        <div class="form-group">
                                            <label class="form-label">Description</label>
                                            <textarea id="embedDescription" class="form-textarea" rows="4" placeholder="Description de l'embed..." maxlength="4096" data-translate="embed_system.description_placeholder"></textarea>
                                            <div class="form-hint">Maximum 4096 caractères. Supporte le markdown Discord</div>
                                        </div>

                                        <div class="form-group">
                                            <label class="form-label">Couleur</label>
                                            <div class="color-picker-group">
                                                <input type="color" id="embedColor" class="form-input color-picker" value="#5865F2">
                                                <div class="color-presets">
                                                    <button type="button" class="color-preset" data-color="#5865F2" title="Blurple Discord" data-translate="embed_system.color_discord_blurple"></button>
                                                    <button type="button" class="color-preset" data-color="#57F287" title="Vert" data-translate="embed_system.color_green"></button>
                                                    <button type="button" class="color-preset" data-color="#FEE75C" title="Jaune" data-translate="embed_system.color_yellow"></button>
                                                    <button type="button" class="color-preset" data-color="#ED4245" title="Rouge" data-translate="embed_system.color_red"></button>
                                                    <button type="button" class="color-preset" data-color="#EB459E" title="Rose" data-translate="embed_system.color_pink"></button>
                                                    <button type="button" class="color-preset" data-color="#00D9FF" title="Cyan" data-translate="embed_system.color_cyan"></button>
                                                </div>
                                            </div>
                                            <div class="form-hint">Cliquez sur les préréglages de couleur ou utilisez le sélecteur</div>
                                        </div>
                                    </div>

                                    <!-- Media Settings -->
                                    <div class="settings-section">
                                        <h4 class="section-title">Médias & Images</h4>
                                        
                                        <div class="form-group">
                                            <label class="form-label">URL de la Miniature</label>
                                            <input type="url" id="embedThumbnail" class="form-control" placeholder="https://example.com/image.png">
                                            <div class="form-hint">Petite image affichée dans le coin supérieur droit</div>
                                        </div>

                                        <div class="form-group">
                                            <label class="form-label">URL de l'Image</label>
                                            <input type="url" id="embedImage" class="form-control" placeholder="https://example.com/image.png">
                                            <div class="form-hint">Grande image affichée dans l'embed</div>
                                        </div>
                                    </div>

                                    <!-- Author & Footer -->
                                    <div class="settings-section">
                                        <h4 class="section-title">Auteur & Pied de Page</h4>
                                        
                                        <div class="form-group">
                                            <div class="toggle-switch">
                                                <input type="checkbox" id="embedAuthorEnabled" class="toggle-input">
                                                <label for="embedAuthorEnabled" class="toggle-label">
                                                    <span class="toggle-text">Ajouter un Auteur</span>
                                                </label>
                                            </div>
                                        </div>

                                        <div id="embedAuthorContainer" style="display: none;">
                                            <div class="form-group">
                                                <label class="form-label">Nom de l'Auteur</label>
                                                <input type="text" id="embedAuthorName" class="form-control" placeholder="Nom de l'auteur..." maxlength="256" data-translate="embed_system.author_name_placeholder">
                                            </div>

                                            <div class="form-group">
                                                <label class="form-label">URL de l'Icône de l'Auteur</label>
                                                <input type="url" id="embedAuthorIcon" class="form-control" placeholder="https://example.com/icon.png">
                                            </div>

                                            <div class="form-group">
                                                <label class="form-label">URL de l'Auteur</label>
                                                <input type="url" id="embedAuthorUrl" class="form-control" placeholder="https://example.com">
                                            </div>
                                        </div>

                                        <div class="form-group">
                                            <div class="toggle-switch">
                                                <input type="checkbox" id="embedFooterEnabled" class="toggle-input">
                                                <label for="embedFooterEnabled" class="toggle-label">
                                                    <span class="toggle-text">Ajouter un Pied de Page</span>
                                                </label>
                                            </div>
                                        </div>

                                        <div id="embedFooterContainer" style="display: none;">
                                            <div class="form-group">
                                                <label class="form-label">Texte du Pied de Page</label>
                                                <input type="text" id="embedFooterText" class="form-control" placeholder="Texte du pied de page..." maxlength="2048" data-translate="embed_system.footer_text_placeholder">
                                            </div>

                                            <div class="form-group">
                                                <label class="form-label">URL de l'Icône du Pied de Page</label>
                                                <input type="url" id="embedFooterIcon" class="form-control" placeholder="https://example.com/icon.png">
                                            </div>

                                            <div class="form-group">
                                                <div class="toggle-switch">
                                                    <input type="checkbox" id="embedTimestamp" class="toggle-input">
                                                    <label for="embedTimestamp" class="toggle-label">
                                                        <span class="toggle-text">Ajouter un Horodatage</span>
                                                    </label>
                                                </div>
                                                <div class="form-hint">Ajoute la date/heure actuelle au pied de page</div>
                                            </div>
                                        </div>
                                    </div>

                                    <!-- Custom Fields -->
                                    <div class="settings-section">
                                        <h4 class="section-title">Champs Personnalisés</h4>
                                        
                                        <div class="form-group">
                                            <div class="toggle-switch">
                                                <input type="checkbox" id="embedFieldsEnabled" class="toggle-input">
                                                <label for="embedFieldsEnabled" class="toggle-label">
                                                    <span class="toggle-text">Ajouter des Champs Personnalisés</span>
                                                </label>
                                            </div>
                                            <div class="form-hint">Ajoutez des champs supplémentaires pour organiser le contenu</div>
                                        </div>

                                        <div id="embedFieldsContainer" style="display: none;">
                                            <div class="form-group">
                                                <label class="form-label">Champs</label>
                                                <div id="embedFieldsList">
                                                    <!-- Dynamic fields will be added here -->
                                                </div>
                                                <button type="button" class="add-field-btn" id="addEmbedField">
                                                    <i class="fas fa-plus me-2"></i>Ajouter un Champ
                                                </button>
                                                <div class="form-hint">Maximum 25 champs, chaque champ a une limite de 1024 caractères pour le nom et la valeur</div>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <!-- Preview Section -->
                                <div class="settings-section">
                                    <h4 class="section-title">Aperçu</h4>
                                    <div class="embed-preview-container">
                                        <div id="embedPreview" class="discord-embed">
                                            <div class="embed-content">
                                                <div class="embed-title-preview">Aperçu de votre embed ici</div>
                                                <div class="embed-description-preview">Remplissez les champs ci-dessus pour voir un aperçu en direct</div>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <!-- Actions -->
                                <div class="form-actions">
                                    <button type="button" class="btn-primary" id="sendEmbedBtn">
                                        <i class="fas fa-paper-plane me-2"></i>
                                        Envoyer l'Embed
                                    </button>
                                    <button type="button" class="btn-secondary" id="previewEmbedBtn">
                                        <i class="fas fa-eye me-2"></i>
                                        <span data-translate="embed_system.refresh_preview">Actualiser l'Aperçu</span>
                                    </button>
                                    <button type="button" class="btn-outline" id="clearEmbedBtn">
                                        <i class="fas fa-trash me-2"></i>
                                        Tout Effacer
                                    </button>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- Ticket Panel Modal -->
    <div class="modal fade" id="ticketPanelModal" tabindex="-1">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="ticketPanelModalTitle">Create Ticket Panel</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <form id="ticketPanelForm">
                        <input type="hidden" id="ticketPanelId">
                        
                        <!-- Basic Panel Settings -->
                        <div class="form-group">
                            <label class="form-label">Panel Name</label>
                            <input type="text" id="ticketPanelName" class="form-input" required>
                            <div class="form-hint">Internal name for this ticket panel</div>
                        </div>

                        <!-- Embed Customization -->
                        <div class="settings-section">
                            <h5 class="section-title">Embed Message</h5>
                            
                            <div class="form-group">
                                <label class="form-label">Title</label>
                                <input type="text" id="ticketEmbedTitle" class="form-input" value="🎫 Support Tickets">
                            </div>

                            <div class="form-group">
                                <label class="form-label">Description</label>
                                <textarea id="ticketEmbedDescription" class="form-textarea" rows="3">Click a button below to create a support ticket</textarea>
                            </div>

                            <div class="form-group">
                                <label class="form-label">Color</label>
                                <input type="color" id="ticketEmbedColor" class="form-input" value="#5865F2">
                            </div>

                            <div class="form-group">
                                <label class="form-label">Thumbnail URL (optional)</label>
                                <input type="url" id="ticketEmbedThumbnail" class="form-input" placeholder="https://example.com/image.png">
                            </div>

                            <div class="form-group">
                                <label class="form-label">Footer Text (optional)</label>
                                <input type="text" id="ticketEmbedFooter" class="form-input" placeholder="Support Team" data-translate="ticket_system.support_team_placeholder">
                            </div>
                        </div>

                        <!-- Buttons Configuration -->
                        <div class="settings-section">
                            <div class="section-header">
                                <h5 class="section-title">Ticket Buttons</h5>
                                <button type="button" class="btn-outline" onclick="dashboard.addTicketButton()">
                                    <i class="fas fa-plus me-2"></i>
                                    Add Button
                                </button>
                            </div>
                            
                            <div class="buttons-list" id="ticketButtonsList">
                                <!-- Buttons will be added here -->
                            </div>
                            
                            <div class="form-hint">Create multiple buttons for different ticket categories</div>
                        </div>

                        <!-- Verification Workflow -->
                        <div class="settings-section">
                            <h5 class="section-title">Workflow de vérification</h5>
                            
                            <div class="form-group">
                                <div class="toggle-switch">
                                    <input type="checkbox" id="panelVerification" class="toggle-input" onchange="document.getElementById('verificationOptions').style.display = this.checked ? 'block' : 'none';">
                                    <label for="panelVerification" class="toggle-label">
                                        <span class="toggle-text">Ce panneau sert à la vérification de membre</span>
                                    </label>
                                </div>
                            </div>

                            <div id="verificationOptions" style="display: none;">
                                <div class="form-group">
                                    <label class="form-label">Rôle vérificateur</label>
                                    <select id="verifierRole" class="form-select">
                                        <option value="">Aucun (tous les modérateurs peuvent vérifier)</option>
                                    </select>
                                    <div class="form-hint">Seuls les membres avec ce rôle pourront vérifier les membres</div>
                                </div>

                                <div class="form-group">
                                    <label class="form-label">Rôles à retirer lors de la vérification</label>
                                    <select id="rolesToRemove" class="form-select" multiple>
                                        <!-- Options dynamiques -->
                                    </select>
                                    <div class="form-hint">Sélectionnez les rôles à retirer quand un membre est vérifié</div>
                                </div>

                                <div class="form-group">
                                    <label class="form-label">Rôles à ajouter lors de la vérification</label>
                                    <select id="rolesToAdd" class="form-select" multiple>
                                        <!-- Options dynamiques -->
                                    </select>
                                    <div class="form-hint">Sélectionnez les rôles à ajouter quand un membre est vérifié</div>
                                </div>

                                <div class="form-group">
                                    <label class="form-label">Salon pour le message de vérification</label>
                                    <select id="verificationChannel" class="form-select">
                                        <option value="">Sélectionner un salon...</option>
                                    </select>
                                    <div class="form-hint">Salon où sera envoyé le message de confirmation</div>
                                </div>

                                <div class="form-group">
                                    <label class="form-label">Message à envoyer lors de la vérification</label>
                                    <textarea id="verificationMessage" class="form-control" placeholder="{user} a été vérifié avec succès !" rows="2"></textarea>
                                    <div class="form-hint">Variables disponibles : {user}, {server}, {channel}</div>
                                </div>

                                <div class="form-group">
                                    <label class="form-label">Image du message de vérification (URL)</label>
                                    <input type="url" id="verificationImageUrl" class="form-control" placeholder="https://exemple.com/image.png">
                                    <div class="form-hint">URL de l'image à afficher dans le message de vérification (optionnel)</div>
                                </div>
                            </div>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn-secondary" data-bs-dismiss="modal">Cancel</button>
                    <button type="button" class="btn-primary" onclick="dashboard.saveTicketPanel()">
                        <i class="fas fa-save me-2"></i>
                        Save Panel
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Ticket Button Template -->
    <template id="ticketButtonTemplate">
        <div class="button-config-item">
            <div class="button-header">
                <h6 class="button-title">Ticket Button</h6>
                <button type="button" class="btn-sm btn-danger" onclick="dashboard.removeTicketButton(this)">
                    <i class="fas fa-trash"></i>
                </button>
            </div>
            
            <div class="button-settings">
                <div class="form-row">
                    <div class="form-group">
                        <label class="form-label">Button Label</label>
                        <input type="text" class="form-input button-label" placeholder="Support Ticket" required data-translate="ticket_system.support_ticket_placeholder">
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Emoji (optional)</label>
                        <input type="text" class="form-input button-emoji" placeholder="🎫">
                    </div>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label class="form-label">Button Style</label>
                        <select class="form-select button-style">
                            <option value="primary">Primary (Blue)</option>
                            <option value="secondary">Secondary (Gray)</option>
                            <option value="success">Success (Green)</option>
                            <option value="danger">Danger (Red)</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Category</label>
                        <select class="form-select button-category">
                            <option value="">Select category...</option>
                        </select>
                    </div>
                </div>
                
                <div class="form-group">
                    <label class="form-label">Ticket Name Format</label>
                    <input type="text" class="form-input button-name-format" value="ticket-{username}" placeholder="ticket-{username}">
                    <div class="form-hint">Use {username}, {userid}, {category} as placeholders</div>
                </div>
                
                <div class="form-group">
                    <label class="form-label">Ping Roles (optional)</label>
                    <div class="ping-roles-container">
                        <select class="form-select ping-roles-select" multiple>
                            <!-- Roles will be loaded here -->
                        </select>
                    </div>
                    <div class="form-hint">Roles to ping when a ticket is created</div>
                </div>
                
                <div class="form-group">
                    <label class="form-label">Initial Message (optional)</label>
                    <textarea class="form-textarea button-initial-message" rows="2" placeholder="Thank you for creating a ticket! Our team will be with you shortly." data-translate="ticket_system.initial_message_placeholder"></textarea>
                </div>
            </div>
        </div>
    </template>

    <!-- Ticket Panel Item Template -->
    <template id="ticketPanelItemTemplate">
        <div class="panel-item">
            <div class="panel-header">
                <div class="panel-info">
                    <h5 class="panel-name"></h5>
                    <p class="panel-details"></p>
                </div>
                <div class="panel-actions">
                    <button type="button" class="btn-sm btn-outline" onclick="dashboard.editTicketPanel(this)">
                        <i class="fas fa-edit"></i>
                        Edit
                    </button>
                    <button type="button" class="btn-sm btn-primary" onclick="dashboard.deployTicketPanel(this)">
                        <i class="fas fa-paper-plane"></i>
                        Deploy
                    </button>
                    <button type="button" class="btn-sm btn-danger" onclick="dashboard.deleteTicketPanel(this)">
                        <i class="fas fa-trash"></i>
                        Delete
                    </button>
                </div>
            </div>
            
            <div class="panel-preview">
                <div class="embed-preview">
                    <div class="embed-title"></div>
                    <div class="embed-description"></div>
                    <div class="embed-buttons"></div>
                </div>
            </div>
        </div>
    </template>

    <!-- Deploy Panel Modal -->
    <div class="modal fade" id="deployPanelModal" tabindex="-1">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Deploy Ticket Panel</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <div class="form-group">
                        <label class="form-label">Select Channel</label>
                        <select id="deployChannelSelect" class="form-select">
                            <option value="">Select a channel...</option>
                        </select>
                        <div class="form-hint">Choose where to send the ticket panel message</div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn-secondary" data-bs-dismiss="modal">Cancel</button>
                    <button type="button" class="btn-primary" onclick="dashboard.confirmDeployPanel()">
                        <i class="fas fa-paper-plane me-2"></i>
                        Deploy Panel
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Ticket Details Modal -->
    <div id="ticketDetailsModal" class="ticket-modal" style="display: none;">
        <div class="ticket-modal-overlay" onclick="closeTicketDetailsModal()"></div>
        <div class="ticket-modal-content">
            <div class="ticket-modal-header">
                <h3 class="ticket-modal-title">
                    <i class="fas fa-ticket-alt me-2"></i>
                    Détails du Ticket
                </h3>
                <button class="ticket-modal-close" onclick="closeTicketDetailsModal()">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            
            <div class="ticket-modal-body">
                <!-- Ticket Info -->
                <div class="ticket-detail-section">
                    <h4 class="section-title">
                        <i class="fas fa-info-circle me-2"></i>
                        Informations
                    </h4>
                    <div class="ticket-detail-grid">
                        <div class="detail-item">
                            <span class="detail-label">ID du Ticket</span>
                            <span class="detail-value" id="detailTicketId">-</span>
                        </div>
                        <div class="detail-item">
                            <span class="detail-label">Statut</span>
                            <span class="detail-value" id="detailTicketStatus">-</span>
                        </div>
                        <div class="detail-item">
                            <span class="detail-label">Créé par</span>
                            <span class="detail-value" id="detailTicketUser">-</span>
                        </div>
                        <div class="detail-item">
                            <span class="detail-label">Date de création</span>
                            <span class="detail-value" id="detailTicketCreated">-</span>
                        </div>
                        <div class="detail-item">
                            <span class="detail-label">Fermé par</span>
                            <span class="detail-value" id="detailTicketClosedBy">-</span>
                        </div>
                        <div class="detail-item">
                            <span class="detail-label">Date de fermeture</span>
                            <span class="detail-value" id="detailTicketClosed">-</span>
                        </div>
                    </div>
                </div>

                <!-- Transcript -->
                <div class="ticket-detail-section">
                    <h4 class="section-title">
                        <i class="fas fa-file-alt me-2"></i>
                        Transcript
                    </h4>
                    <div id="ticketTranscriptSection">
                        <div class="transcript-preview" id="transcriptPreview">
                            <p class="text-secondary">Chargement du transcript...</p>
                        </div>
                        <div class="transcript-actions">
                            <button class="btn-primary" id="openTranscriptBtn" style="display: none;" onclick="openFullTranscript()">
                                <i class="fas fa-external-link-alt me-2"></i>
                                Ouvrir le transcript complet
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Events Timeline -->
                <div class="ticket-detail-section">
                    <h4 class="section-title">
                        <i class="fas fa-history me-2"></i>
                        Historique des événements
                    </h4>
                    <div class="timeline" id="ticketEventsTimeline">
                        <p class="text-secondary">Chargement des événements...</p>
                    </div>
                </div>
            </div>
            
            <div class="ticket-modal-footer">
                <button class="btn-secondary" onclick="closeTicketDetailsModal()">
                    Fermer
                </button>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        // Initialize language data from backend
        window.langData = {{ lang_data | tojson | safe }};
        window.currentLang = "{{ current_lang | safe }}";
        window.supportedLanguages = {{ supported_languages | tojson | safe }};
    </script>
    <script src="/static/charts.js?v={{ timestamp }}"></script>
    <script src="/static/dashboard.js?v={{ timestamp }}"></script>
    <script src="/static/moderation.js?v={{ timestamp }}"></script>
</body>
</html>
